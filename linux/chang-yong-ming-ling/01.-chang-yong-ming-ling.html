<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>01. 常用命令 | zxk&#39;s book</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/books/Avatar.jpg">
    <meta name="description" content="兴趣使然的备忘库">
    <link rel="preload" href="/books/assets/css/0.styles.253527df.css" as="style"><link rel="preload" href="/books/assets/js/app.a32f3f13.js" as="script"><link rel="preload" href="/books/assets/js/2.f434c5a6.js" as="script"><link rel="preload" href="/books/assets/js/18.d3146ce7.js" as="script"><link rel="prefetch" href="/books/assets/js/10.dceff922.js"><link rel="prefetch" href="/books/assets/js/100.e86d25aa.js"><link rel="prefetch" href="/books/assets/js/101.654d6902.js"><link rel="prefetch" href="/books/assets/js/102.6e048095.js"><link rel="prefetch" href="/books/assets/js/103.26ec951e.js"><link rel="prefetch" href="/books/assets/js/104.f413fdc7.js"><link rel="prefetch" href="/books/assets/js/105.0b5517ef.js"><link rel="prefetch" href="/books/assets/js/106.025ff37f.js"><link rel="prefetch" href="/books/assets/js/107.3fd4a2da.js"><link rel="prefetch" href="/books/assets/js/108.c33413cd.js"><link rel="prefetch" href="/books/assets/js/109.69c58c80.js"><link rel="prefetch" href="/books/assets/js/11.f4ff5e98.js"><link rel="prefetch" href="/books/assets/js/110.da669047.js"><link rel="prefetch" href="/books/assets/js/111.27221683.js"><link rel="prefetch" href="/books/assets/js/112.ae80afd9.js"><link rel="prefetch" href="/books/assets/js/113.d17c58d7.js"><link rel="prefetch" href="/books/assets/js/114.26c4f4c1.js"><link rel="prefetch" href="/books/assets/js/115.5491e5a0.js"><link rel="prefetch" href="/books/assets/js/116.a209ce38.js"><link rel="prefetch" href="/books/assets/js/117.c3a25178.js"><link rel="prefetch" href="/books/assets/js/118.b518ee54.js"><link rel="prefetch" href="/books/assets/js/119.e017c898.js"><link rel="prefetch" href="/books/assets/js/12.6dae06d9.js"><link rel="prefetch" href="/books/assets/js/120.1baf3023.js"><link rel="prefetch" href="/books/assets/js/121.71a13847.js"><link rel="prefetch" href="/books/assets/js/122.e058174e.js"><link rel="prefetch" href="/books/assets/js/123.5252e439.js"><link rel="prefetch" href="/books/assets/js/124.e919844e.js"><link rel="prefetch" href="/books/assets/js/125.b4b936d5.js"><link rel="prefetch" href="/books/assets/js/126.0ff2a40d.js"><link rel="prefetch" href="/books/assets/js/127.0e27fcc5.js"><link rel="prefetch" href="/books/assets/js/128.b0d65cea.js"><link rel="prefetch" href="/books/assets/js/129.3f7c4fb2.js"><link rel="prefetch" href="/books/assets/js/13.fd393096.js"><link rel="prefetch" href="/books/assets/js/130.22907055.js"><link rel="prefetch" href="/books/assets/js/131.9b6a7fa1.js"><link rel="prefetch" href="/books/assets/js/132.0141d721.js"><link rel="prefetch" href="/books/assets/js/133.62368e0f.js"><link rel="prefetch" href="/books/assets/js/134.c22be34f.js"><link rel="prefetch" href="/books/assets/js/135.9c30742f.js"><link rel="prefetch" href="/books/assets/js/136.8e29ebad.js"><link rel="prefetch" href="/books/assets/js/137.9bd0b5ba.js"><link rel="prefetch" href="/books/assets/js/138.41a78831.js"><link rel="prefetch" href="/books/assets/js/139.a9376eeb.js"><link rel="prefetch" href="/books/assets/js/14.208ec185.js"><link rel="prefetch" href="/books/assets/js/140.b4f63a2e.js"><link rel="prefetch" href="/books/assets/js/141.6a4888c7.js"><link rel="prefetch" href="/books/assets/js/142.d675963b.js"><link rel="prefetch" href="/books/assets/js/143.501abfa1.js"><link rel="prefetch" href="/books/assets/js/144.fdbc09d5.js"><link rel="prefetch" href="/books/assets/js/145.5bb6218a.js"><link rel="prefetch" href="/books/assets/js/146.b5ba45c3.js"><link rel="prefetch" href="/books/assets/js/147.e0a80eb4.js"><link rel="prefetch" href="/books/assets/js/148.27910016.js"><link rel="prefetch" href="/books/assets/js/149.013194c7.js"><link rel="prefetch" href="/books/assets/js/15.16c314bd.js"><link rel="prefetch" href="/books/assets/js/150.3154742d.js"><link rel="prefetch" href="/books/assets/js/151.78fc6a13.js"><link rel="prefetch" href="/books/assets/js/152.e97f9998.js"><link rel="prefetch" href="/books/assets/js/153.3d92ef79.js"><link rel="prefetch" href="/books/assets/js/154.70c9f7a4.js"><link rel="prefetch" href="/books/assets/js/155.4b924a86.js"><link rel="prefetch" href="/books/assets/js/156.59e71763.js"><link rel="prefetch" href="/books/assets/js/157.8c8cd5ed.js"><link rel="prefetch" href="/books/assets/js/158.739ecc99.js"><link rel="prefetch" href="/books/assets/js/159.5a22b675.js"><link rel="prefetch" href="/books/assets/js/16.d3259c7f.js"><link rel="prefetch" href="/books/assets/js/160.3cc481bb.js"><link rel="prefetch" href="/books/assets/js/161.5cdebd7a.js"><link rel="prefetch" href="/books/assets/js/162.d56ac8d7.js"><link rel="prefetch" href="/books/assets/js/163.a89f22d0.js"><link rel="prefetch" href="/books/assets/js/164.e5e25ddb.js"><link rel="prefetch" href="/books/assets/js/165.406cc447.js"><link rel="prefetch" href="/books/assets/js/166.0f09d541.js"><link rel="prefetch" href="/books/assets/js/167.afee8669.js"><link rel="prefetch" href="/books/assets/js/168.1ae1f6ce.js"><link rel="prefetch" href="/books/assets/js/169.1bfb929c.js"><link rel="prefetch" href="/books/assets/js/17.6ea641b2.js"><link rel="prefetch" href="/books/assets/js/170.0baab93a.js"><link rel="prefetch" href="/books/assets/js/171.65e2e3b6.js"><link rel="prefetch" href="/books/assets/js/172.9a0d4dfd.js"><link rel="prefetch" href="/books/assets/js/173.0690d3f4.js"><link rel="prefetch" href="/books/assets/js/174.52a3d4eb.js"><link rel="prefetch" href="/books/assets/js/175.33e4696f.js"><link rel="prefetch" href="/books/assets/js/176.6c865e6e.js"><link rel="prefetch" href="/books/assets/js/177.1b2a7c93.js"><link rel="prefetch" href="/books/assets/js/178.37c33f6b.js"><link rel="prefetch" href="/books/assets/js/179.ef76c85c.js"><link rel="prefetch" href="/books/assets/js/180.0e457253.js"><link rel="prefetch" href="/books/assets/js/181.dee67b63.js"><link rel="prefetch" href="/books/assets/js/182.069a8f30.js"><link rel="prefetch" href="/books/assets/js/183.0330f5ce.js"><link rel="prefetch" href="/books/assets/js/184.efd2fde2.js"><link rel="prefetch" href="/books/assets/js/185.7d64b540.js"><link rel="prefetch" href="/books/assets/js/186.82e60409.js"><link rel="prefetch" href="/books/assets/js/187.0d54afe4.js"><link rel="prefetch" href="/books/assets/js/188.81a9510a.js"><link rel="prefetch" href="/books/assets/js/189.279c7f6f.js"><link rel="prefetch" href="/books/assets/js/19.ef650392.js"><link rel="prefetch" href="/books/assets/js/190.e5a7480c.js"><link rel="prefetch" href="/books/assets/js/191.f365d8de.js"><link rel="prefetch" href="/books/assets/js/192.84ea0f67.js"><link rel="prefetch" href="/books/assets/js/193.bb2e01d9.js"><link rel="prefetch" href="/books/assets/js/194.ef6b690e.js"><link rel="prefetch" href="/books/assets/js/195.1ee66346.js"><link rel="prefetch" href="/books/assets/js/196.f34cbe99.js"><link rel="prefetch" href="/books/assets/js/197.cbbdab75.js"><link rel="prefetch" href="/books/assets/js/198.845810f3.js"><link rel="prefetch" href="/books/assets/js/199.5e1147de.js"><link rel="prefetch" href="/books/assets/js/20.21272222.js"><link rel="prefetch" href="/books/assets/js/200.57f5e124.js"><link rel="prefetch" href="/books/assets/js/201.a572c554.js"><link rel="prefetch" href="/books/assets/js/202.5ce9f4a7.js"><link rel="prefetch" href="/books/assets/js/203.bc6f8876.js"><link rel="prefetch" href="/books/assets/js/204.126953e5.js"><link rel="prefetch" href="/books/assets/js/205.9aeca759.js"><link rel="prefetch" href="/books/assets/js/206.ec099168.js"><link rel="prefetch" href="/books/assets/js/207.6e5b496b.js"><link rel="prefetch" href="/books/assets/js/208.6624d24c.js"><link rel="prefetch" href="/books/assets/js/209.3d8ff15b.js"><link rel="prefetch" href="/books/assets/js/21.a956aa7a.js"><link rel="prefetch" href="/books/assets/js/210.6429663d.js"><link rel="prefetch" href="/books/assets/js/211.1d8725a1.js"><link rel="prefetch" href="/books/assets/js/212.d1ff2873.js"><link rel="prefetch" href="/books/assets/js/213.e213f9d1.js"><link rel="prefetch" href="/books/assets/js/214.a9b5c7ec.js"><link rel="prefetch" href="/books/assets/js/215.fd7a5238.js"><link rel="prefetch" href="/books/assets/js/216.96394ddb.js"><link rel="prefetch" href="/books/assets/js/217.3f41d192.js"><link rel="prefetch" href="/books/assets/js/218.622af412.js"><link rel="prefetch" href="/books/assets/js/219.772992ff.js"><link rel="prefetch" href="/books/assets/js/22.fb2ff9d3.js"><link rel="prefetch" href="/books/assets/js/220.99efbde4.js"><link rel="prefetch" href="/books/assets/js/221.9932f6ce.js"><link rel="prefetch" href="/books/assets/js/222.e9c2624f.js"><link rel="prefetch" href="/books/assets/js/223.c87d79a7.js"><link rel="prefetch" href="/books/assets/js/224.6fc0bed5.js"><link rel="prefetch" href="/books/assets/js/225.443418f3.js"><link rel="prefetch" href="/books/assets/js/226.d0e9e921.js"><link rel="prefetch" href="/books/assets/js/227.b29a9627.js"><link rel="prefetch" href="/books/assets/js/228.6b9c5eb3.js"><link rel="prefetch" href="/books/assets/js/229.a2dee41e.js"><link rel="prefetch" href="/books/assets/js/23.77b92b70.js"><link rel="prefetch" href="/books/assets/js/230.b36a47b9.js"><link rel="prefetch" href="/books/assets/js/231.d7a52023.js"><link rel="prefetch" href="/books/assets/js/232.5c445a90.js"><link rel="prefetch" href="/books/assets/js/233.398e8141.js"><link rel="prefetch" href="/books/assets/js/234.86f5ff7b.js"><link rel="prefetch" href="/books/assets/js/235.d8271e43.js"><link rel="prefetch" href="/books/assets/js/236.41b92eb4.js"><link rel="prefetch" href="/books/assets/js/237.4d52bf88.js"><link rel="prefetch" href="/books/assets/js/238.209dd5d8.js"><link rel="prefetch" href="/books/assets/js/239.a977d564.js"><link rel="prefetch" href="/books/assets/js/24.96161161.js"><link rel="prefetch" href="/books/assets/js/240.56008448.js"><link rel="prefetch" href="/books/assets/js/241.95144dec.js"><link rel="prefetch" href="/books/assets/js/242.deacfcf7.js"><link rel="prefetch" href="/books/assets/js/243.6bd3a203.js"><link rel="prefetch" href="/books/assets/js/244.20662085.js"><link rel="prefetch" href="/books/assets/js/245.3079d8db.js"><link rel="prefetch" href="/books/assets/js/246.59cbb76d.js"><link rel="prefetch" href="/books/assets/js/247.dab4d54b.js"><link rel="prefetch" href="/books/assets/js/248.dd78e28c.js"><link rel="prefetch" href="/books/assets/js/249.47cfb0fb.js"><link rel="prefetch" href="/books/assets/js/25.bb622e2d.js"><link rel="prefetch" href="/books/assets/js/250.8b7c06de.js"><link rel="prefetch" href="/books/assets/js/251.90d4bb83.js"><link rel="prefetch" href="/books/assets/js/252.4b70df27.js"><link rel="prefetch" href="/books/assets/js/253.baa34cc9.js"><link rel="prefetch" href="/books/assets/js/254.64c84394.js"><link rel="prefetch" href="/books/assets/js/255.4245dca1.js"><link rel="prefetch" href="/books/assets/js/256.4bd25081.js"><link rel="prefetch" href="/books/assets/js/257.44a180fd.js"><link rel="prefetch" href="/books/assets/js/258.ef8eb1df.js"><link rel="prefetch" href="/books/assets/js/259.ca38bbda.js"><link rel="prefetch" href="/books/assets/js/26.800c4d14.js"><link rel="prefetch" href="/books/assets/js/260.fc42b0a6.js"><link rel="prefetch" href="/books/assets/js/27.be0559b4.js"><link rel="prefetch" href="/books/assets/js/28.cdb01ee8.js"><link rel="prefetch" href="/books/assets/js/29.27c415ce.js"><link rel="prefetch" href="/books/assets/js/3.7dd1ae11.js"><link rel="prefetch" href="/books/assets/js/30.da6f6371.js"><link rel="prefetch" href="/books/assets/js/31.c824c17b.js"><link rel="prefetch" href="/books/assets/js/32.45c04f7c.js"><link rel="prefetch" href="/books/assets/js/33.315cf7d5.js"><link rel="prefetch" href="/books/assets/js/34.b532da2f.js"><link rel="prefetch" href="/books/assets/js/35.0af657d1.js"><link rel="prefetch" href="/books/assets/js/36.2df4655c.js"><link rel="prefetch" href="/books/assets/js/37.a4887720.js"><link rel="prefetch" href="/books/assets/js/38.68a08b9d.js"><link rel="prefetch" href="/books/assets/js/39.bf63d04a.js"><link rel="prefetch" href="/books/assets/js/4.e8102eb5.js"><link rel="prefetch" href="/books/assets/js/40.a3c5cdd1.js"><link rel="prefetch" href="/books/assets/js/41.116ef3fc.js"><link rel="prefetch" href="/books/assets/js/42.f3b8b588.js"><link rel="prefetch" href="/books/assets/js/43.b1d59c70.js"><link rel="prefetch" href="/books/assets/js/44.579ee856.js"><link rel="prefetch" href="/books/assets/js/45.807bba31.js"><link rel="prefetch" href="/books/assets/js/46.db611eda.js"><link rel="prefetch" href="/books/assets/js/47.d4d02273.js"><link rel="prefetch" href="/books/assets/js/48.7f011fb9.js"><link rel="prefetch" href="/books/assets/js/49.3aac265b.js"><link rel="prefetch" href="/books/assets/js/5.638928ae.js"><link rel="prefetch" href="/books/assets/js/50.8b75be66.js"><link rel="prefetch" href="/books/assets/js/51.576e782b.js"><link rel="prefetch" href="/books/assets/js/52.85987e06.js"><link rel="prefetch" href="/books/assets/js/53.6a8c240c.js"><link rel="prefetch" href="/books/assets/js/54.6a97379c.js"><link rel="prefetch" href="/books/assets/js/55.97955477.js"><link rel="prefetch" href="/books/assets/js/56.3d477c83.js"><link rel="prefetch" href="/books/assets/js/57.56aa4dff.js"><link rel="prefetch" href="/books/assets/js/58.833c8652.js"><link rel="prefetch" href="/books/assets/js/59.24ca7ee9.js"><link rel="prefetch" href="/books/assets/js/6.32ee54fa.js"><link rel="prefetch" href="/books/assets/js/60.1fc1c4a2.js"><link rel="prefetch" href="/books/assets/js/61.14b84590.js"><link rel="prefetch" href="/books/assets/js/62.8a2d2de8.js"><link rel="prefetch" href="/books/assets/js/63.0dcfee0b.js"><link rel="prefetch" href="/books/assets/js/64.8c28a59c.js"><link rel="prefetch" href="/books/assets/js/65.6d1ae46c.js"><link rel="prefetch" href="/books/assets/js/66.5a616c98.js"><link rel="prefetch" href="/books/assets/js/67.bead4bdc.js"><link rel="prefetch" href="/books/assets/js/68.1d20f97a.js"><link rel="prefetch" href="/books/assets/js/69.76ec2223.js"><link rel="prefetch" href="/books/assets/js/7.b59836f2.js"><link rel="prefetch" href="/books/assets/js/70.6066afd2.js"><link rel="prefetch" href="/books/assets/js/71.d25994bf.js"><link rel="prefetch" href="/books/assets/js/72.94ab8cdd.js"><link rel="prefetch" href="/books/assets/js/73.6682438b.js"><link rel="prefetch" href="/books/assets/js/74.d8d9aac9.js"><link rel="prefetch" href="/books/assets/js/75.c178891f.js"><link rel="prefetch" href="/books/assets/js/76.2292d907.js"><link rel="prefetch" href="/books/assets/js/77.940c9473.js"><link rel="prefetch" href="/books/assets/js/78.1e9432ad.js"><link rel="prefetch" href="/books/assets/js/79.f548c8c7.js"><link rel="prefetch" href="/books/assets/js/8.c9e4b615.js"><link rel="prefetch" href="/books/assets/js/80.e03d9a9c.js"><link rel="prefetch" href="/books/assets/js/81.222e5797.js"><link rel="prefetch" href="/books/assets/js/82.bea6ed3c.js"><link rel="prefetch" href="/books/assets/js/83.cb05beb1.js"><link rel="prefetch" href="/books/assets/js/84.6e31c3ad.js"><link rel="prefetch" href="/books/assets/js/85.b0ce07ff.js"><link rel="prefetch" href="/books/assets/js/86.ae6fb79f.js"><link rel="prefetch" href="/books/assets/js/87.6863b804.js"><link rel="prefetch" href="/books/assets/js/88.ba149380.js"><link rel="prefetch" href="/books/assets/js/89.343c2068.js"><link rel="prefetch" href="/books/assets/js/9.61e3915f.js"><link rel="prefetch" href="/books/assets/js/90.8f71cab6.js"><link rel="prefetch" href="/books/assets/js/91.6334c0db.js"><link rel="prefetch" href="/books/assets/js/92.8a7e8c1d.js"><link rel="prefetch" href="/books/assets/js/93.bd68832a.js"><link rel="prefetch" href="/books/assets/js/94.4083af3f.js"><link rel="prefetch" href="/books/assets/js/95.775d1cde.js"><link rel="prefetch" href="/books/assets/js/96.e244a8c4.js"><link rel="prefetch" href="/books/assets/js/97.27aa8f2b.js"><link rel="prefetch" href="/books/assets/js/98.9d03fea6.js"><link rel="prefetch" href="/books/assets/js/99.488c24e9.js">
    <link rel="stylesheet" href="/books/assets/css/0.styles.253527df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/books/" class="router-link-active home-link"><img src="/books/Avatar.jpg" alt="zxk's book" class="logo"> <span class="site-name">zxk's book</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          大数据
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          编程语言
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          编程基础
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          专栏学习
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Linux
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/books/ruan-jian/">
          软件
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/books/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/Rianico/books" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>常用命令</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html" aria-current="page" title="01. 常用命令" class="active sidebar-link">01. 常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_1-awk" title="1. awk" class="sidebar-link">1. awk</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_2-xargs" title="2. xargs" class="sidebar-link">2. xargs</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_3-vim" title="3. vim" class="sidebar-link">3. vim</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_4-sed" title="4. sed" class="sidebar-link">4. sed</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_5-交换内存" title="5. 交换内存" class="sidebar-link">5. 交换内存</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_6-系统信息" title="6. 系统信息" class="sidebar-link">6. 系统信息</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_7-查看网络" title="7. 查看网络" class="sidebar-link">7. 查看网络</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_8-lsof" title="8. lsof" class="sidebar-link">8. lsof</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_9-sort" title="9. sort" class="sidebar-link">9. sort</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_10-mount" title="10. mount" class="sidebar-link">10. mount</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_11-wget" title="11. wget" class="sidebar-link">11. wget</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_12-多进程" title="12. 多进程" class="sidebar-link">12. 多进程</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_13-ps" title="13. ps" class="sidebar-link">13. ps</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_14-磁盘相关" title="14. 磁盘相关" class="sidebar-link">14. 磁盘相关</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_15-split-切割文件" title="15 split 切割文件" class="sidebar-link">15 split 切割文件</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_16-centos-禁止远程-root-登录" title="16. CentOS 禁止远程 root 登录" class="sidebar-link">16. CentOS 禁止远程 root 登录</a></li><li class="sidebar-sub-header"><a href="/books/linux/chang-yong-ming-ling/01.-chang-yong-ming-ling.html#_17-关闭透明大页" title="17. 关闭透明大页" class="sidebar-link">17. 关闭透明大页</a></li></ul></li><li><a href="/books/linux/chang-yong-ming-ling/02.centos-guan-bi-tou-ming-da-ye.html" title="CentOs 关闭透明大页" class="sidebar-link">CentOs 关闭透明大页</a></li><li><a href="/books/linux/chang-yong-ming-ling/02.docker-chang-yong-ming-ling.html" title="02. Docker 常用命令" class="sidebar-link">02. Docker 常用命令</a></li><li><a href="/books/linux/chang-yong-ming-ling/02.cdh-xiang-guan-ming-ling.html" title="/linux/chang-yong-ming-ling/02.cdh-xiang-guan-ming-ling.html" class="sidebar-link">/linux/chang-yong-ming-ling/02.cdh-xiang-guan-ming-ling.html</a></li><li><a href="/books/linux/chang-yong-ming-ling/03.-xiu-fu-postfix-fu-wu.html" title="修复 postfix 服务" class="sidebar-link">修复 postfix 服务</a></li><li><a href="/books/linux/chang-yong-ming-ling/05.-centos-jin-zhi-root-yong-hu-yuan-cheng-deng-lu.html" title="CentOs 禁止 root 用户远程登录" class="sidebar-link">CentOs 禁止 root 用户远程登录</a></li><li><a href="/books/linux/chang-yong-ming-ling/06.-pai-cha-ci-pan-wen-jian-zhan-man-wen-ti.html" title="排查磁盘文件占满问题" class="sidebar-link">排查磁盘文件占满问题</a></li><li><a href="/books/linux/chang-yong-ming-ling/07.-rm-cao-zuo-de-yi-xie-zhu-yi-shi-xiang.html" title="rm 操作的一些注意事项" class="sidebar-link">rm 操作的一些注意事项</a></li><li><a href="/books/linux/chang-yong-ming-ling/07.rm-cao-zuo-de-yi-xie-zhu-yi-shi-xiang.html" title="rm 操作的一些注意事项" class="sidebar-link">rm 操作的一些注意事项</a></li><li><a href="/books/linux/chang-yong-ming-ling/08.-ulimit-xiu-gai-zui-da-kai-wen-jian-shu.html" title="ulimit 修改最打开文件数" class="sidebar-link">ulimit 修改最打开文件数</a></li><li><a href="/books/linux/chang-yong-ming-ling/08.ulimit-xiu-gai-zui-da-kai-wen-jian-shu.html" title="ulimit 修改最打开文件数" class="sidebar-link">ulimit 修改最打开文件数</a></li><li><a href="/books/linux/chang-yong-ming-ling/09.linux-cha-kan-ji-qi-wen-du.html" title="09. Linux 查看机器温度" class="sidebar-link">09. Linux 查看机器温度</a></li><li><a href="/books/linux/chang-yong-ming-ling/" aria-current="page" title="README" class="sidebar-link">README</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="_1-awk"><a href="#_1-awk" class="header-anchor">#</a> 1. awk</h2> <ol><li><p>统计网络连接各状态数目</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">netstat</span> -n <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^tcp/ {++S[<span class="token variable">$NF</span>]} END {for(a in S) print a, S[a]}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看 HDFS 异常文件</p> <ul><li>OFS：指定输出结果的分隔符，默认空格。</li> <li>FS：指定输入结果的分隔符。</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_CLIENT_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-XX:-UseGCOverheadLimit -Xmx10240m&quot;</span>
hadoop fs -du -s /data/20200917/2*/*/*/* <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{ OFS=&quot;|&quot; }{print <span class="token variable">$1</span>,<span class="token variable">$2</span>,<span class="token variable">$3</span>}'</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;^0|&quot;</span><span class="token operator">|</span><span class="token function">awk</span> -F<span class="token string">'|'</span> <span class="token string">'{system(&quot;sudo -u hdfs hadoop fs -rm -f &quot; <span class="token variable">$3</span>)}'</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>awk 对列求和：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> -e <span class="token string">'1<span class="token entity" title="\n">\n</span>2'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{sum += <span class="token variable">$1</span>};END {print sum}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="_2-xargs"><a href="#_2-xargs" class="header-anchor">#</a> 2. xargs</h2> <ol><li><p>递归改名</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -n1 表示最多读取一个参数</span>
<span class="token function">find</span> / -name <span class="token string">'part*'</span><span class="token operator">|</span><span class="token function">xargs</span> -n1 <span class="token function">rename</span> <span class="token string">'part'</span> <span class="token string">'jiake-part'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h2 id="_3-vim"><a href="#_3-vim" class="header-anchor">#</a> 3. vim</h2> <ol><li><p>设置中文</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936<span class="token entity" title="\n">\n</span>set termencoding=utf-8<span class="token entity" title="\n">\n</span>set encoding=utf-8&quot;'</span> <span class="token operator">&gt;</span> ~/.vimrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="_4-sed"><a href="#_4-sed" class="header-anchor">#</a> 4. sed</h2> <ol><li><p>强制替换文本内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">'s/aaa/bbb/g'</span> xxx.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>结合 grep 批量修改文件内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -i：允许直接修改文件</span>
<span class="token comment"># -r：递归    -l：只输出match到的文件名</span>
<span class="token function">sed</span> -i <span class="token string">&quot;s/原字符串/新字符串/g&quot;</span> <span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> 匹配文件名 -rl 所在目录<span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>搜索匹配的文本</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -n 不输出原文本内容</span>
<span class="token comment"># p 指定匹配模式，输出匹配行</span>
<span class="token comment"># = 输出行号</span>
<span class="token function">sed</span> -n <span class="token string">'/search/p'</span> file.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h2 id="_5-交换内存"><a href="#_5-交换内存" class="header-anchor">#</a> 5. 交换内存</h2> <p>swap分区是在系统内存不足时，转而利用磁盘空间作为内存使用的一种机制。</p> <p><code>swappiness</code>的值决定了Linux在使用了多少内存之后就会开始使用磁盘的swap分区，默认值通常为60，也就是说，Linux在剩下 </p><p><mjx-container jax="SVG" display="true" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="19.355ex" height="1.882ex" viewBox="0 -750 8555 832" style="vertical-align:-0.186ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000, 0)"></path></g><g data-mml-node="mi" transform="translate(1500, 0)"><path data-c="25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></g><g data-mml-node="mo" transform="translate(2555.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3555.4, 0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path></g><g data-mml-node="mi" transform="translate(4555.4, 0)"><path data-c="25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></g><g data-mml-node="mo" transform="translate(5666.2, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(6722, 0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path></g><g data-mml-node="mi" transform="translate(7722, 0)"><path data-c="25" d="M465 605Q428 605 394 614T340 632T319 641Q332 608 332 548Q332 458 293 403T202 347Q145 347 101 402T56 548Q56 637 101 693T202 750Q241 750 272 719Q359 642 464 642Q580 642 650 732Q662 748 668 749Q670 750 673 750Q682 750 688 743T693 726Q178 -47 170 -52Q166 -56 160 -56Q147 -56 142 -45Q137 -36 142 -27Q143 -24 363 304Q469 462 525 546T581 630Q528 605 465 605ZM207 385Q235 385 263 427T292 548Q292 617 267 664T200 712Q193 712 186 709T167 698T147 668T134 615Q132 595 132 548V527Q132 436 165 403Q183 385 203 385H207ZM500 146Q500 234 544 290T647 347Q699 347 737 292T776 146T737 0T646 -56Q590 -56 545 0T500 146ZM651 -18Q679 -18 707 24T736 146Q736 215 711 262T644 309Q637 309 630 306T611 295T591 265T578 212Q577 200 577 146V124Q577 -18 647 -18H651Z"></path></g></g></g></svg></mjx-container></p> 内存的时候，系统便会开始使用swap分区。<p></p> <p>由于swap分区位于磁盘上，速度肯定是不如内存的，因此通常会把这个值调小到1~10之间：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看swappiness</span>
sysctl -q vm.swappiness

<span class="token comment"># 临时修改swappiness，重启后失效</span>
sysctl -w vm.swappiness<span class="token operator">=</span><span class="token number">1</span>

<span class="token comment"># 查看swap空间所在设备</span>
<span class="token function">swapon</span> -s

<span class="token comment"># 关闭swap并重新打开，将swap的数据清空</span>
swapoff -a <span class="token operator">&amp;&amp;</span> <span class="token function">swapon</span> -a

<span class="token comment"># 永久修改swappiness</span>
<span class="token builtin class-name">echo</span> <span class="token string">'vm.swappiness = 1'</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf <span class="token operator">&amp;&amp;</span> sysctl -p
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_6-系统信息"><a href="#_6-系统信息" class="header-anchor">#</a> 6. 系统信息</h2> <h3 id="_6-1-cpu-信息"><a href="#_6-1-cpu-信息" class="header-anchor">#</a> 6.1 CPU 信息</h3> <ul><li>物理 CPU ：服务器插槽上的 CPU 个数，可以通过不重复的 physical id 得知有几个。</li> <li>CPU 核心数：每个物理 CPU 都可以有多个 core。</li> <li>CPU 逻辑核心数：若处理器支持超线程技术，还可以在物理 CPU 核心数的基础上再乘以一个倍数（通常为 2）。</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看 CPU 型号</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;model name&quot;</span> <span class="token operator">|</span> <span class="token function">uniq</span>

<span class="token comment"># 查看 CPU 频率</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;cpu MHz&quot;</span> <span class="token operator">|</span> <span class="token function">uniq</span>

<span class="token comment"># 服务器的物理 CPU 数量</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;physical id&quot;</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span><span class="token operator">|</span><span class="token function">wc</span> -l
<span class="token number">2</span>
<span class="token comment"># 每个 CPU 的核心数</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;cores&quot;</span><span class="token operator">|</span><span class="token function">uniq</span>
cpu cores       <span class="token builtin class-name">:</span> <span class="token number">8</span>
<span class="token comment"># 查看总的核心数*超线程数</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;processor&quot;</span> <span class="token operator">|</span><span class="token function">wc</span> -l
<span class="token number">32</span>
<span class="token comment"># 查看每个 CPU 的核心数以及超线程</span>
$ <span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">grep</span> -e <span class="token string">&quot;cpu cores&quot;</span>  -e <span class="token string">&quot;siblings&quot;</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span>

<span class="token comment"># 查看CPU三级缓存</span>
$ lscpu
<span class="token comment"># 查看缓存行单位大小</span>
$ <span class="token function">cat</span> /sys/devices/system/cpu/cpu1/cache/index0/coherency_line_size
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>鲲鹏服务器（arm 架构，920 处理器）是没有超线程概念的，通过 <code>/proc/cpuinfo</code> 也仅能看到总的核心数，可以通过下列命令查看物理 cpu 信息以及核心数：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dmidecode -t processor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_6-2-查看操作系统版本"><a href="#_6-2-查看操作系统版本" class="header-anchor">#</a> 6.2 查看操作系统版本</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> /etc/issue
<span class="token function">cat</span> /etc/redhat-release
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-3-查看内核版本"><a href="#_6-3-查看内核版本" class="header-anchor">#</a> 6.3 查看内核版本</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">uname</span> -smr
Linux <span class="token number">3.10</span>.0-957.12.2.el7.x86_64 x86_64
<span class="token number">3</span> - 内核版本.
<span class="token number">10</span> - 主修订版本.
<span class="token number">0</span>-957 - 次要修订版本.
<span class="token number">12</span> - 补丁版本.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6-4-查看bios版本信息及内存信息、服务器型号"><a href="#_6-4-查看bios版本信息及内存信息、服务器型号" class="header-anchor">#</a> 6.4 查看bios版本信息及内存信息、服务器型号</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看服务器厂商</span>
<span class="token function">dmesg</span> <span class="token operator">|</span> <span class="token function">grep</span> -i DMI
dmidecode -t system <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;Manufacturer\|Product Name\|Version\|Serial Number&quot;</span>
<span class="token function">cat</span> /sys/class/dmi/id/board_vendor

<span class="token comment"># 查看bios信息</span>
dmidecode -t bios
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-5-查看环境变量，字符集（lang）"><a href="#_6-5-查看环境变量，字符集（lang）" class="header-anchor">#</a> 6.5 查看环境变量，字符集（LANG）</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">env</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>有时候由于升级 glib 后某些文件的权限不正确，会让不同用户能读取的系统关键文件不一样，从而导致一些异常问题（e.g. 不同用户时区不一致）。</p> <h3 id="_6-6-查看系统架构"><a href="#_6-6-查看系统架构" class="header-anchor">#</a> 6.6 查看系统架构</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>aarch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_7-查看网络"><a href="#_7-查看网络" class="header-anchor">#</a> 7. 查看网络</h2> <h3 id="_7-1-netstat"><a href="#_7-1-netstat" class="header-anchor">#</a> 7.1 netstat</h3> <h3 id="_7-2-ss"><a href="#_7-2-ss" class="header-anchor">#</a> 7.2 ss</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>-s：显示摘要信息
-n：不解析服务名称，以数字方式显示；
-a：显示所有的套接字；
-l：显示处于监听状态的套接字；

-p：显示使用套接字的进程信息；
-o：显示计时器信息；
-m：显示套接字的内存使用情况；
-i：显示内部的TCP信息；

-4：只显示ipv4的套接字；
-6：只显示ipv6的套接字；

-t：只显示tcp套接字；
-u：只显示udp套接字；

-d：只显示DCCP套接字；
-w：仅显示RAW套接字；
-x：仅显示UNIX域套接字。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol><li><p>查看网络统计（e.g. tcp 连接数、udp 连接数等）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ss -s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看 socket 使用的 rmem、wmem：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ss -ntm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="_7-3-查看-tcp-rmem-wmem"><a href="#_7-3-查看-tcp-rmem-wmem" class="header-anchor">#</a> 7.3 查看 tcp rmem/wmem</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ sysctl -a <span class="token operator">|</span> <span class="token function">egrep</span> <span class="token string">&quot;rmem|wmem|adv_win|moderate&quot;</span>
net.core.rmem_default <span class="token operator">=</span> <span class="token number">212992</span>
net.core.rmem_max <span class="token operator">=</span> <span class="token number">212992</span>
net.core.wmem_default <span class="token operator">=</span> <span class="token number">212992</span>
net.core.wmem_max <span class="token operator">=</span> <span class="token number">212992</span>
net.ipv4.tcp_adv_win_scale <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment"># 自动调整 tcp (rw)mem</span>
net.ipv4.tcp_moderate_rcvbuf <span class="token operator">=</span> <span class="token number">1</span>
net.ipv4.tcp_rmem <span class="token operator">=</span> <span class="token number">4096</span>    <span class="token number">87380</span>   <span class="token number">6291456</span>
net.ipv4.tcp_wmem <span class="token operator">=</span> <span class="token number">4096</span>    <span class="token number">16384</span>   <span class="token number">4194304</span>
net.ipv4.udp_rmem_min <span class="token operator">=</span> <span class="token number">4096</span>
net.ipv4.udp_wmem_min <span class="token operator">=</span> <span class="token number">4096</span>
vm.lowmem_reserve_ratio <span class="token operator">=</span> <span class="token number">256</span>   <span class="token number">256</span> <span class="token number">32</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>net.ipv4.tcp_(rw)mem</code> 优先于 <code>net.core.(rw)mem_max</code>，在不指定 <code>SO_SNDBUF</code> 以及 <code>SO_RCVBUF</code> 的时候，内核会默认在 <code>net.ipv4.tcp_(rw)mem</code> 范围动态调整。</p> <p>(rw)mem 的大小通常可以通过 RTT * （带宽 / 8）来计算得出，在数据发送出去后，直到收到 ack 之前，数据所占用的内存是不会释放的，此时 CPU 也无法继续发送数据，造成资源浪费。</p> <h3 id="_7-4-dstat"><a href="#_7-4-dstat" class="header-anchor">#</a> 7.4 dstat</h3> <p>dstat 可以同时查看磁盘、带宽的吞吐量</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dstat

----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
usr sys idl wai hiq siq<span class="token operator">|</span> <span class="token builtin class-name">read</span>  writ<span class="token operator">|</span> recv  send<span class="token operator">|</span>  <span class="token keyword">in</span>   out <span class="token operator">|</span> int   csw 
  <span class="token number">4</span>   <span class="token number">0</span>  <span class="token number">96</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>3056k   15M<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span><span class="token number">2116</span>  <span class="token number">2664</span> 
  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">100</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> 771B 7652B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">816</span>  <span class="token number">1178</span> ^C
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_8-lsof"><a href="#_8-lsof" class="header-anchor">#</a> 8. lsof</h2> <ol><li><p>使用 lsof 统计进程打开文件数</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">lsof</span> -n <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token operator">|</span> <span class="token function">uniq</span> -c <span class="token operator">|</span> <span class="token function">sort</span> -nr <span class="token operator">|</span> <span class="token function">more</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="_9-sort"><a href="#_9-sort" class="header-anchor">#</a> 9. sort</h2> <h2 id="_10-mount"><a href="#_10-mount" class="header-anchor">#</a> 10. mount</h2> <ol><li><p>将一个文件当做当成硬盘分区挂载到目录下</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mount</span> -o loop /opt/centos7.6.iso /var/www/html
<span class="token comment"># ro：采用只读方bai式挂接设备</span>
<span class="token comment"># rw：采用读写方式挂接设备</span>
<span class="token comment"># iocharset：指定访问文件系统所用字符集</span>
<span class="token comment"># 在类 UNIX 系统里，loop 设备是一种伪设备(pseudo-device)，或者也可以说是仿真设备。它能使我们像块设备一样访问一个文件。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h2 id="_11-wget"><a href="#_11-wget" class="header-anchor">#</a> 11. wget</h2> <ol><li><p>使用 wget 拉取阿里云 yum 仓库</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> -r -p -np -k http://mirrors.aliyun.com/epel/7/x86_64/ -e <span class="token assign-left variable">robots</span><span class="token operator">=</span>off --no-check-certificate
<span class="token comment"># -r 递归</span>
<span class="token comment"># -p 下载所有用于显示 HTML 页面的图片之类的元素。</span>
<span class="token comment"># -np 不追溯父目录</span>
<span class="token comment"># -k 让下载得到的 HTML 或 CSS 中的链接指向本地文件。</span>
<span class="token comment"># --no-check-certificate   不要验证服务器的证书。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>同步 yum 仓库还可以使用 reposync 命令完成</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 配置华为云 epel 的 CentOS-7 镜像</span>
yum <span class="token function">install</span> https://repo.huaweicloud.com/epel/epel-release-latest-7.noarch.rpm
<span class="token function">sed</span> -i <span class="token string">&quot;s/#baseurl/baseurl/g&quot;</span> /etc/yum.repos.d/epel.repo
<span class="token function">sed</span> -i <span class="token string">&quot;s/metalink/#metalink/g&quot;</span> /etc/yum.repos.d/epel.repo
<span class="token function">sed</span> -i <span class="token string">&quot;s@https\?://download.fedoraproject.org/pub@https://repo.huaweicloud.com@g&quot;</span> /etc/yum.repos.d/epel.repo

<span class="token comment"># 如果想要拉取 x86 架构的库，则将 baseurl=https://repo.huaweicloud.com/epel/7/$basearch 修改为如下</span>
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/x86_64

<span class="token comment"># 更新 yum cache</span>
yum clean all <span class="token operator">&amp;&amp;</span> yum makecache

<span class="token comment"># 之后执行 reposync 命令，最后可以见到 /data3/zxk/repo/epel 目录</span>
reposync -r epel -a x86_64 -p /data3/zxk/repo/
<span class="token comment"># 创建 yum 仓库的 repo</span>
createrepo  /data3/zxk/repo/epel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <h2 id="_12-多进程"><a href="#_12-多进程" class="header-anchor">#</a> 12. 多进程</h2> <p>shell 中通过 <code>&amp;</code> 启动后台子任务后，如果是一个比较耗时的操作，则需要使用 <code>wait</code> 来等待其完成，否则操作将不完整，且在不同地方调用 wait，wait 的作用域也不同。</p> <p>在函数中调用 wait，会等待当前函数中未完成的子任务，在 shell 中调用 wait，会等待当前 shell 的 子任务，而不会等待函数中的子任务。因此要达到类似同步的效果，通常需要在函数以及 shell 中一起调用 wait。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>
<span class="token function-name function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">sleep</span> <span class="token number">5</span> <span class="token operator">&amp;</span>
  <span class="token comment"># 会等待5s</span>
  <span class="token function">wait</span>
<span class="token punctuation">}</span>

fun <span class="token operator">&amp;</span>
<span class="token comment"># 会等待fun完成</span>
<span class="token function">wait</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_13-ps"><a href="#_13-ps" class="header-anchor">#</a> 13. ps</h2> <p>ps 提供了 sort 进行排序：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 根据 pid、运行时间排序</span>
<span class="token comment"># -o：自定义格式</span>
<span class="token comment">## lstart 开始时间</span>
<span class="token comment">## etime 运行时间</span>
<span class="token function">ps</span> eo pid,lstart,etime --sort<span class="token operator">=</span>pid,lstart,etime

<span class="token comment"># 可排序的参数</span>
<span class="token comment">## rss：真实使用的内存</span>
<span class="token comment">## vsz：使用的虚拟内存</span>
<span class="token comment">## %cpu：使用的 cpu 比例</span>
<span class="token comment">## %mem：使用的内存比例</span>
<span class="token function">ps</span> aux --sort<span class="token operator">=</span>%cpu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果排序需要倒序，添加 <code>-</code> 即可，例如 <code>--sort=-%cpu</code>。</p> <h2 id="_14-磁盘相关"><a href="#_14-磁盘相关" class="header-anchor">#</a> 14. 磁盘相关</h2> <p>重新扫描磁盘设备：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">host</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> /sys/class/scsi_host/<span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">'- - -'</span>  <span class="token operator">&gt;</span> /sys/class/scsi_host/<span class="token variable">$host</span>/scan<span class="token punctuation">;</span><span class="token keyword">done</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看磁盘是否为固态（rota 为 0）：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>lsblk -d -o name,rota
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看磁盘接口：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>lsscsi -vv

 sysfsroot: /sys
<span class="token punctuation">[</span><span class="token number">0</span>:2:0:0<span class="token punctuation">]</span>    disk    DELL     PERC H730 Adp    <span class="token number">4.25</span>  /dev/sda 
  dir: /sys/bus/scsi/devices/0:2:0:0  <span class="token punctuation">[</span>/sys/devices/pci0000:00/0000:00:03.0/0000:03:00.0/host0/target0:2:0/0:2:0:0<span class="token punctuation">]</span>
  
<span class="token comment"># PERC H730 Adp 表示做了 raid，否则会是磁盘型号</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_15-split-切割文件"><a href="#_15-split-切割文件" class="header-anchor">#</a> 15 split 切割文件</h2> <p>语法格式：<code>Usage: split [OPTION]... [FILE [PREFIX]]</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -a：指定后缀数字长度</span>
<span class="token comment"># -d：指定后缀从数字 0 开始计数，--numeric-suffixes[=FROM] 允许指定初始值</span>
<span class="token function">split</span> -a <span class="token number">2</span> -d -n <span class="token number">2</span> sf-fire-calls.csv sf-fire-calls.csv
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>-n：指定目标切割数</li> <li>-b：按照字节数切割，单位：k、m</li> <li>-C：按照字节数切割，但会尽可能保持完整的一行记录，单位：k、m</li> <li>-l：按照行来切割</li></ul> <h2 id="_16-centos-禁止远程-root-登录"><a href="#_16-centos-禁止远程-root-登录" class="header-anchor">#</a> 16. CentOS 禁止远程 root 登录</h2> <p>1.修改配置文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 修改配置文件</span>
<span class="token function">vim</span> /etc/ssh/sshd_config 
<span class="token comment"># 修改 PermitRootLogin 为 no 禁止远程 root 登录</span>
PermitRootLogin no
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.重新加载配置文件或者重启服务</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 重新加载配置文件</span>
/etc/rc.d/init.d/sshd reload
<span class="token comment"># 重启 ssh 服务</span>
/etc/rc.d/init.d/sshd restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_17-关闭透明大页"><a href="#_17-关闭透明大页" class="header-anchor">#</a> 17. 关闭透明大页</h2> <p>cdh官方文档推荐在集群的服务器上关闭透明大页，关闭命令如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> never <span class="token operator">&gt;</span> /sys/kernel/mm/transparent_hugepage/enabled <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> never <span class="token operator">&gt;</span> /sys/kernel/mm/transparent_hugepage/defrag <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled'</span> <span class="token operator">&gt;&gt;</span> /etc/rc.local <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">'echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag'</span> <span class="token operator">&gt;&gt;</span> /etc/rc.local
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以结合ansible进行批量执行。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/21/2021, 10:56:15 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/books/linux/chang-yong-ming-ling/02.centos-guan-bi-tou-ming-da-ye.html">
        CentOs 关闭透明大页
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/books/assets/js/app.a32f3f13.js" defer></script><script src="/books/assets/js/2.f434c5a6.js" defer></script><script src="/books/assets/js/18.d3146ce7.js" defer></script>
  </body>
</html>