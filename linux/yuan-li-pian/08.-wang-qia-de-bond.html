<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>查看网卡的 bond | zxk&#39;s book</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/books/Avatar.jpg">
    <meta name="description" content="兴趣使然的备忘库">
    <link rel="preload" href="/books/assets/css/0.styles.253527df.css" as="style"><link rel="preload" href="/books/assets/js/app.a32f3f13.js" as="script"><link rel="preload" href="/books/assets/js/2.f434c5a6.js" as="script"><link rel="preload" href="/books/assets/js/12.6dae06d9.js" as="script"><link rel="prefetch" href="/books/assets/js/10.dceff922.js"><link rel="prefetch" href="/books/assets/js/100.e86d25aa.js"><link rel="prefetch" href="/books/assets/js/101.654d6902.js"><link rel="prefetch" href="/books/assets/js/102.6e048095.js"><link rel="prefetch" href="/books/assets/js/103.26ec951e.js"><link rel="prefetch" href="/books/assets/js/104.f413fdc7.js"><link rel="prefetch" href="/books/assets/js/105.0b5517ef.js"><link rel="prefetch" href="/books/assets/js/106.025ff37f.js"><link rel="prefetch" href="/books/assets/js/107.3fd4a2da.js"><link rel="prefetch" href="/books/assets/js/108.c33413cd.js"><link rel="prefetch" href="/books/assets/js/109.69c58c80.js"><link rel="prefetch" href="/books/assets/js/11.f4ff5e98.js"><link rel="prefetch" href="/books/assets/js/110.da669047.js"><link rel="prefetch" href="/books/assets/js/111.27221683.js"><link rel="prefetch" href="/books/assets/js/112.ae80afd9.js"><link rel="prefetch" href="/books/assets/js/113.d17c58d7.js"><link rel="prefetch" href="/books/assets/js/114.26c4f4c1.js"><link rel="prefetch" href="/books/assets/js/115.5491e5a0.js"><link rel="prefetch" href="/books/assets/js/116.a209ce38.js"><link rel="prefetch" href="/books/assets/js/117.c3a25178.js"><link rel="prefetch" href="/books/assets/js/118.b518ee54.js"><link rel="prefetch" href="/books/assets/js/119.e017c898.js"><link rel="prefetch" href="/books/assets/js/120.1baf3023.js"><link rel="prefetch" href="/books/assets/js/121.71a13847.js"><link rel="prefetch" href="/books/assets/js/122.e058174e.js"><link rel="prefetch" href="/books/assets/js/123.5252e439.js"><link rel="prefetch" href="/books/assets/js/124.e919844e.js"><link rel="prefetch" href="/books/assets/js/125.b4b936d5.js"><link rel="prefetch" href="/books/assets/js/126.0ff2a40d.js"><link rel="prefetch" href="/books/assets/js/127.0e27fcc5.js"><link rel="prefetch" href="/books/assets/js/128.b0d65cea.js"><link rel="prefetch" href="/books/assets/js/129.3f7c4fb2.js"><link rel="prefetch" href="/books/assets/js/13.fd393096.js"><link rel="prefetch" href="/books/assets/js/130.22907055.js"><link rel="prefetch" href="/books/assets/js/131.9b6a7fa1.js"><link rel="prefetch" href="/books/assets/js/132.0141d721.js"><link rel="prefetch" href="/books/assets/js/133.62368e0f.js"><link rel="prefetch" href="/books/assets/js/134.c22be34f.js"><link rel="prefetch" href="/books/assets/js/135.9c30742f.js"><link rel="prefetch" href="/books/assets/js/136.8e29ebad.js"><link rel="prefetch" href="/books/assets/js/137.9bd0b5ba.js"><link rel="prefetch" href="/books/assets/js/138.41a78831.js"><link rel="prefetch" href="/books/assets/js/139.a9376eeb.js"><link rel="prefetch" href="/books/assets/js/14.208ec185.js"><link rel="prefetch" href="/books/assets/js/140.b4f63a2e.js"><link rel="prefetch" href="/books/assets/js/141.6a4888c7.js"><link rel="prefetch" href="/books/assets/js/142.d675963b.js"><link rel="prefetch" href="/books/assets/js/143.501abfa1.js"><link rel="prefetch" href="/books/assets/js/144.fdbc09d5.js"><link rel="prefetch" href="/books/assets/js/145.5bb6218a.js"><link rel="prefetch" href="/books/assets/js/146.b5ba45c3.js"><link rel="prefetch" href="/books/assets/js/147.e0a80eb4.js"><link rel="prefetch" href="/books/assets/js/148.27910016.js"><link rel="prefetch" href="/books/assets/js/149.013194c7.js"><link rel="prefetch" href="/books/assets/js/15.16c314bd.js"><link rel="prefetch" href="/books/assets/js/150.3154742d.js"><link rel="prefetch" href="/books/assets/js/151.78fc6a13.js"><link rel="prefetch" href="/books/assets/js/152.e97f9998.js"><link rel="prefetch" href="/books/assets/js/153.3d92ef79.js"><link rel="prefetch" href="/books/assets/js/154.70c9f7a4.js"><link rel="prefetch" href="/books/assets/js/155.4b924a86.js"><link rel="prefetch" href="/books/assets/js/156.59e71763.js"><link rel="prefetch" href="/books/assets/js/157.8c8cd5ed.js"><link rel="prefetch" href="/books/assets/js/158.739ecc99.js"><link rel="prefetch" href="/books/assets/js/159.5a22b675.js"><link rel="prefetch" href="/books/assets/js/16.d3259c7f.js"><link rel="prefetch" href="/books/assets/js/160.3cc481bb.js"><link rel="prefetch" href="/books/assets/js/161.5cdebd7a.js"><link rel="prefetch" href="/books/assets/js/162.d56ac8d7.js"><link rel="prefetch" href="/books/assets/js/163.a89f22d0.js"><link rel="prefetch" href="/books/assets/js/164.e5e25ddb.js"><link rel="prefetch" href="/books/assets/js/165.406cc447.js"><link rel="prefetch" href="/books/assets/js/166.0f09d541.js"><link rel="prefetch" href="/books/assets/js/167.afee8669.js"><link rel="prefetch" href="/books/assets/js/168.1ae1f6ce.js"><link rel="prefetch" href="/books/assets/js/169.1bfb929c.js"><link rel="prefetch" href="/books/assets/js/17.6ea641b2.js"><link rel="prefetch" href="/books/assets/js/170.0baab93a.js"><link rel="prefetch" href="/books/assets/js/171.65e2e3b6.js"><link rel="prefetch" href="/books/assets/js/172.9a0d4dfd.js"><link rel="prefetch" href="/books/assets/js/173.0690d3f4.js"><link rel="prefetch" href="/books/assets/js/174.52a3d4eb.js"><link rel="prefetch" href="/books/assets/js/175.33e4696f.js"><link rel="prefetch" href="/books/assets/js/176.6c865e6e.js"><link rel="prefetch" href="/books/assets/js/177.1b2a7c93.js"><link rel="prefetch" href="/books/assets/js/178.37c33f6b.js"><link rel="prefetch" href="/books/assets/js/179.ef76c85c.js"><link rel="prefetch" href="/books/assets/js/18.d3146ce7.js"><link rel="prefetch" href="/books/assets/js/180.0e457253.js"><link rel="prefetch" href="/books/assets/js/181.dee67b63.js"><link rel="prefetch" href="/books/assets/js/182.069a8f30.js"><link rel="prefetch" href="/books/assets/js/183.0330f5ce.js"><link rel="prefetch" href="/books/assets/js/184.efd2fde2.js"><link rel="prefetch" href="/books/assets/js/185.7d64b540.js"><link rel="prefetch" href="/books/assets/js/186.82e60409.js"><link rel="prefetch" href="/books/assets/js/187.0d54afe4.js"><link rel="prefetch" href="/books/assets/js/188.81a9510a.js"><link rel="prefetch" href="/books/assets/js/189.279c7f6f.js"><link rel="prefetch" href="/books/assets/js/19.ef650392.js"><link rel="prefetch" href="/books/assets/js/190.e5a7480c.js"><link rel="prefetch" href="/books/assets/js/191.f365d8de.js"><link rel="prefetch" href="/books/assets/js/192.84ea0f67.js"><link rel="prefetch" href="/books/assets/js/193.bb2e01d9.js"><link rel="prefetch" href="/books/assets/js/194.ef6b690e.js"><link rel="prefetch" href="/books/assets/js/195.1ee66346.js"><link rel="prefetch" href="/books/assets/js/196.f34cbe99.js"><link rel="prefetch" href="/books/assets/js/197.cbbdab75.js"><link rel="prefetch" href="/books/assets/js/198.845810f3.js"><link rel="prefetch" href="/books/assets/js/199.5e1147de.js"><link rel="prefetch" href="/books/assets/js/20.21272222.js"><link rel="prefetch" href="/books/assets/js/200.57f5e124.js"><link rel="prefetch" href="/books/assets/js/201.a572c554.js"><link rel="prefetch" href="/books/assets/js/202.5ce9f4a7.js"><link rel="prefetch" href="/books/assets/js/203.bc6f8876.js"><link rel="prefetch" href="/books/assets/js/204.126953e5.js"><link rel="prefetch" href="/books/assets/js/205.9aeca759.js"><link rel="prefetch" href="/books/assets/js/206.ec099168.js"><link rel="prefetch" href="/books/assets/js/207.6e5b496b.js"><link rel="prefetch" href="/books/assets/js/208.6624d24c.js"><link rel="prefetch" href="/books/assets/js/209.3d8ff15b.js"><link rel="prefetch" href="/books/assets/js/21.a956aa7a.js"><link rel="prefetch" href="/books/assets/js/210.6429663d.js"><link rel="prefetch" href="/books/assets/js/211.1d8725a1.js"><link rel="prefetch" href="/books/assets/js/212.d1ff2873.js"><link rel="prefetch" href="/books/assets/js/213.e213f9d1.js"><link rel="prefetch" href="/books/assets/js/214.a9b5c7ec.js"><link rel="prefetch" href="/books/assets/js/215.fd7a5238.js"><link rel="prefetch" href="/books/assets/js/216.96394ddb.js"><link rel="prefetch" href="/books/assets/js/217.3f41d192.js"><link rel="prefetch" href="/books/assets/js/218.622af412.js"><link rel="prefetch" href="/books/assets/js/219.772992ff.js"><link rel="prefetch" href="/books/assets/js/22.fb2ff9d3.js"><link rel="prefetch" href="/books/assets/js/220.99efbde4.js"><link rel="prefetch" href="/books/assets/js/221.9932f6ce.js"><link rel="prefetch" href="/books/assets/js/222.e9c2624f.js"><link rel="prefetch" href="/books/assets/js/223.c87d79a7.js"><link rel="prefetch" href="/books/assets/js/224.6fc0bed5.js"><link rel="prefetch" href="/books/assets/js/225.443418f3.js"><link rel="prefetch" href="/books/assets/js/226.d0e9e921.js"><link rel="prefetch" href="/books/assets/js/227.b29a9627.js"><link rel="prefetch" href="/books/assets/js/228.6b9c5eb3.js"><link rel="prefetch" href="/books/assets/js/229.a2dee41e.js"><link rel="prefetch" href="/books/assets/js/23.77b92b70.js"><link rel="prefetch" href="/books/assets/js/230.b36a47b9.js"><link rel="prefetch" href="/books/assets/js/231.d7a52023.js"><link rel="prefetch" href="/books/assets/js/232.5c445a90.js"><link rel="prefetch" href="/books/assets/js/233.398e8141.js"><link rel="prefetch" href="/books/assets/js/234.86f5ff7b.js"><link rel="prefetch" href="/books/assets/js/235.d8271e43.js"><link rel="prefetch" href="/books/assets/js/236.41b92eb4.js"><link rel="prefetch" href="/books/assets/js/237.4d52bf88.js"><link rel="prefetch" href="/books/assets/js/238.209dd5d8.js"><link rel="prefetch" href="/books/assets/js/239.a977d564.js"><link rel="prefetch" href="/books/assets/js/24.96161161.js"><link rel="prefetch" href="/books/assets/js/240.56008448.js"><link rel="prefetch" href="/books/assets/js/241.95144dec.js"><link rel="prefetch" href="/books/assets/js/242.deacfcf7.js"><link rel="prefetch" href="/books/assets/js/243.6bd3a203.js"><link rel="prefetch" href="/books/assets/js/244.20662085.js"><link rel="prefetch" href="/books/assets/js/245.3079d8db.js"><link rel="prefetch" href="/books/assets/js/246.59cbb76d.js"><link rel="prefetch" href="/books/assets/js/247.dab4d54b.js"><link rel="prefetch" href="/books/assets/js/248.dd78e28c.js"><link rel="prefetch" href="/books/assets/js/249.47cfb0fb.js"><link rel="prefetch" href="/books/assets/js/25.bb622e2d.js"><link rel="prefetch" href="/books/assets/js/250.8b7c06de.js"><link rel="prefetch" href="/books/assets/js/251.90d4bb83.js"><link rel="prefetch" href="/books/assets/js/252.4b70df27.js"><link rel="prefetch" href="/books/assets/js/253.baa34cc9.js"><link rel="prefetch" href="/books/assets/js/254.64c84394.js"><link rel="prefetch" href="/books/assets/js/255.4245dca1.js"><link rel="prefetch" href="/books/assets/js/256.4bd25081.js"><link rel="prefetch" href="/books/assets/js/257.44a180fd.js"><link rel="prefetch" href="/books/assets/js/258.ef8eb1df.js"><link rel="prefetch" href="/books/assets/js/259.ca38bbda.js"><link rel="prefetch" href="/books/assets/js/26.800c4d14.js"><link rel="prefetch" href="/books/assets/js/260.fc42b0a6.js"><link rel="prefetch" href="/books/assets/js/27.be0559b4.js"><link rel="prefetch" href="/books/assets/js/28.cdb01ee8.js"><link rel="prefetch" href="/books/assets/js/29.27c415ce.js"><link rel="prefetch" href="/books/assets/js/3.7dd1ae11.js"><link rel="prefetch" href="/books/assets/js/30.da6f6371.js"><link rel="prefetch" href="/books/assets/js/31.c824c17b.js"><link rel="prefetch" href="/books/assets/js/32.45c04f7c.js"><link rel="prefetch" href="/books/assets/js/33.315cf7d5.js"><link rel="prefetch" href="/books/assets/js/34.b532da2f.js"><link rel="prefetch" href="/books/assets/js/35.0af657d1.js"><link rel="prefetch" href="/books/assets/js/36.2df4655c.js"><link rel="prefetch" href="/books/assets/js/37.a4887720.js"><link rel="prefetch" href="/books/assets/js/38.68a08b9d.js"><link rel="prefetch" href="/books/assets/js/39.bf63d04a.js"><link rel="prefetch" href="/books/assets/js/4.e8102eb5.js"><link rel="prefetch" href="/books/assets/js/40.a3c5cdd1.js"><link rel="prefetch" href="/books/assets/js/41.116ef3fc.js"><link rel="prefetch" href="/books/assets/js/42.f3b8b588.js"><link rel="prefetch" href="/books/assets/js/43.b1d59c70.js"><link rel="prefetch" href="/books/assets/js/44.579ee856.js"><link rel="prefetch" href="/books/assets/js/45.807bba31.js"><link rel="prefetch" href="/books/assets/js/46.db611eda.js"><link rel="prefetch" href="/books/assets/js/47.d4d02273.js"><link rel="prefetch" href="/books/assets/js/48.7f011fb9.js"><link rel="prefetch" href="/books/assets/js/49.3aac265b.js"><link rel="prefetch" href="/books/assets/js/5.638928ae.js"><link rel="prefetch" href="/books/assets/js/50.8b75be66.js"><link rel="prefetch" href="/books/assets/js/51.576e782b.js"><link rel="prefetch" href="/books/assets/js/52.85987e06.js"><link rel="prefetch" href="/books/assets/js/53.6a8c240c.js"><link rel="prefetch" href="/books/assets/js/54.6a97379c.js"><link rel="prefetch" href="/books/assets/js/55.97955477.js"><link rel="prefetch" href="/books/assets/js/56.3d477c83.js"><link rel="prefetch" href="/books/assets/js/57.56aa4dff.js"><link rel="prefetch" href="/books/assets/js/58.833c8652.js"><link rel="prefetch" href="/books/assets/js/59.24ca7ee9.js"><link rel="prefetch" href="/books/assets/js/6.32ee54fa.js"><link rel="prefetch" href="/books/assets/js/60.1fc1c4a2.js"><link rel="prefetch" href="/books/assets/js/61.14b84590.js"><link rel="prefetch" href="/books/assets/js/62.8a2d2de8.js"><link rel="prefetch" href="/books/assets/js/63.0dcfee0b.js"><link rel="prefetch" href="/books/assets/js/64.8c28a59c.js"><link rel="prefetch" href="/books/assets/js/65.6d1ae46c.js"><link rel="prefetch" href="/books/assets/js/66.5a616c98.js"><link rel="prefetch" href="/books/assets/js/67.bead4bdc.js"><link rel="prefetch" href="/books/assets/js/68.1d20f97a.js"><link rel="prefetch" href="/books/assets/js/69.76ec2223.js"><link rel="prefetch" href="/books/assets/js/7.b59836f2.js"><link rel="prefetch" href="/books/assets/js/70.6066afd2.js"><link rel="prefetch" href="/books/assets/js/71.d25994bf.js"><link rel="prefetch" href="/books/assets/js/72.94ab8cdd.js"><link rel="prefetch" href="/books/assets/js/73.6682438b.js"><link rel="prefetch" href="/books/assets/js/74.d8d9aac9.js"><link rel="prefetch" href="/books/assets/js/75.c178891f.js"><link rel="prefetch" href="/books/assets/js/76.2292d907.js"><link rel="prefetch" href="/books/assets/js/77.940c9473.js"><link rel="prefetch" href="/books/assets/js/78.1e9432ad.js"><link rel="prefetch" href="/books/assets/js/79.f548c8c7.js"><link rel="prefetch" href="/books/assets/js/8.c9e4b615.js"><link rel="prefetch" href="/books/assets/js/80.e03d9a9c.js"><link rel="prefetch" href="/books/assets/js/81.222e5797.js"><link rel="prefetch" href="/books/assets/js/82.bea6ed3c.js"><link rel="prefetch" href="/books/assets/js/83.cb05beb1.js"><link rel="prefetch" href="/books/assets/js/84.6e31c3ad.js"><link rel="prefetch" href="/books/assets/js/85.b0ce07ff.js"><link rel="prefetch" href="/books/assets/js/86.ae6fb79f.js"><link rel="prefetch" href="/books/assets/js/87.6863b804.js"><link rel="prefetch" href="/books/assets/js/88.ba149380.js"><link rel="prefetch" href="/books/assets/js/89.343c2068.js"><link rel="prefetch" href="/books/assets/js/9.61e3915f.js"><link rel="prefetch" href="/books/assets/js/90.8f71cab6.js"><link rel="prefetch" href="/books/assets/js/91.6334c0db.js"><link rel="prefetch" href="/books/assets/js/92.8a7e8c1d.js"><link rel="prefetch" href="/books/assets/js/93.bd68832a.js"><link rel="prefetch" href="/books/assets/js/94.4083af3f.js"><link rel="prefetch" href="/books/assets/js/95.775d1cde.js"><link rel="prefetch" href="/books/assets/js/96.e244a8c4.js"><link rel="prefetch" href="/books/assets/js/97.27aa8f2b.js"><link rel="prefetch" href="/books/assets/js/98.9d03fea6.js"><link rel="prefetch" href="/books/assets/js/99.488c24e9.js">
    <link rel="stylesheet" href="/books/assets/css/0.styles.253527df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/books/" class="router-link-active home-link"><img src="/books/Avatar.jpg" alt="zxk's book" class="logo"> <span class="site-name">zxk's book</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          大数据
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          编程语言
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          编程基础
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          专栏学习
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Linux
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/books/ruan-jian/">
          软件
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/books/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/Rianico/books" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>原理篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/books/linux/yuan-li-pian/01.linux-fu-wu-qi-de-he-xin-shu-guan-xi.html" title="Linux 服务器的核心数关系" class="sidebar-link">Linux 服务器的核心数关系</a></li><li><a href="/books/linux/yuan-li-pian/02.linux-ling-kao-bei-shi-xian.html" title="Linux 零拷贝实现" class="sidebar-link">Linux 零拷贝实现</a></li><li><a href="/books/linux/yuan-li-pian/03.linux-wen-jian-te-shu-quan-xian.html" title="Linux 文件特殊权限" class="sidebar-link">Linux 文件特殊权限</a></li><li><a href="/books/linux/yuan-li-pian/04.linxu-xia-free-ming-ling-shu-chu-xiang-guan.html" title="Linxu 下 free 命令输出相关" class="sidebar-link">Linxu 下 free 命令输出相关</a></li><li><a href="/books/linux/yuan-li-pian/05.ntp-fu-wu.html" title="NTP 服务" class="sidebar-link">NTP 服务</a></li><li><a href="/books/linux/yuan-li-pian/07.xfs-vs-ext4-wen-jian-xi-tong.html" title="xfs VS ext4 文件系统" class="sidebar-link">xfs VS ext4 文件系统</a></li><li><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html" aria-current="page" title="查看网卡的 bond" class="active sidebar-link">查看网卡的 bond</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html#_1-查看-bond" title="1. 查看 bond" class="sidebar-link">1. 查看 bond</a></li><li class="sidebar-sub-header"><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html#_2-配置-bond" title="2. 配置 bond" class="sidebar-link">2. 配置 bond</a></li><li class="sidebar-sub-header"><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html#_3-开启路由转发" title="3. 开启路由转发" class="sidebar-link">3. 开启路由转发</a></li><li class="sidebar-sub-header"><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html#_4-查看物理网卡" title="4. 查看物理网卡" class="sidebar-link">4. 查看物理网卡</a></li><li class="sidebar-sub-header"><a href="/books/linux/yuan-li-pian/08.-wang-qia-de-bond.html#_5-异常处理" title="5. 异常处理" class="sidebar-link">5. 异常处理</a></li></ul></li><li><a href="/books/linux/yuan-li-pian/09.-guan-yu-mkfs.ex4-de-inode.html" title="关于 mkfs.ex4 的 inode" class="sidebar-link">关于 mkfs.ex4 的 inode</a></li><li><a href="/books/linux/yuan-li-pian/10.numa-jia-gou.html" title="NUMA 架构" class="sidebar-link">NUMA 架构</a></li><li><a href="/books/linux/yuan-li-pian/11.ld_library_path-xiang-jie.html" title="LDLIBRARYPATH 详解" class="sidebar-link">LDLIBRARYPATH 详解</a></li><li><a href="/books/linux/yuan-li-pian/12.linux-ge-mu-lu-han-yi.html" title="12. Linux 各目录含义" class="sidebar-link">12. Linux 各目录含义</a></li><li><a href="/books/linux/yuan-li-pian/" aria-current="page" title="README" class="sidebar-link">README</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="_1-查看-bond"><a href="#_1-查看-bond" class="header-anchor">#</a> 1. 查看 bond</h2> <p>bond 是将多张物理网卡绑定为一张逻辑网卡，有多个 mode 可选。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># cat /proc/net/bonding/bond0</span>
Ethernet Channel Bonding Driver: v3.7.1 <span class="token punctuation">(</span>April <span class="token number">27</span>, <span class="token number">2011</span><span class="token punctuation">)</span>

Bonding Mode: fault-tolerance <span class="token punctuation">(</span>active-backup<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其中括号内的 active-backup 代表 mode1，代表主备高可用。</p> <p><strong>bond的模式常用的有两种：</strong></p> <p><strong>mode=0（balance-rr）</strong>：负载分担 round-robin，以轮询方式走多个网卡，直到数据包发送完毕。</p> <ul><li>优点：流量提高。</li> <li>缺点：需要接入交换机做端口聚合，否则可能无法使用。</li></ul> <p><strong>mode=1（active-backup）</strong>：主备模式，同一时间只有1块网卡在工作。</p> <ul><li>优点：冗余性高。</li> <li>缺点：链路利用率低，两块网卡只有1块在工作</li></ul> <p><strong>mode=2 (balance-xor，平衡策略)</strong>：以XOR Hash 负载均衡，和交换机的聚合强制不协商方式配合。（需要xmit_hash_policy，需要交换机配置port channel）。</p> <ul><li>特点：基于指定的传输HASH策略传输数据包。缺省的策略是：(源MAC地址 XOR 目标MAC地址) % slave数量。其他的传输策略可以通过xmit_hash_policy选项指定，此模式提供负载平衡和容错能力</li></ul> <p><strong>mode=3 (broadcast，广播策略)</strong>：表示所有包从所有网络接口发出，这个不均衡，只有冗余机制，但过于浪费资源。此模式适用于金融行业，因为他们需要高可靠性的网络，不允许出现任何问题。需要和交换机的聚合强制不协商方式配合。</p> <ul><li>特点：在每个slave接口上传输每个数据包，此模式提供了容错能力</li></ul> <p><strong>mode=4 (802.3ad，IEEE 802.3ad 动态链接聚合)</strong>：表示支持802.3ad协议，和交换机的聚合LACP方式配合（需要 xmit_hash_policy） 标准要求所有设备在聚合操作时，要在同样的速率和双工模式，而且，和除了balance-rr模式外的其它bonding负载均衡模式一样，任何连接都不能使用多于一个接口的带宽。</p> <ul><li><p>特点：创建一个聚合组，它们共享同样的速率和双工设定。根据802.3ad规范将多个slave工作在同一个激活的聚合体下。出口流量的 slave 选举是基于传输 hash 策略，该策略可以通过 xmit_hash_policy 选项从缺省的 XOR 策略改变到其他策略。需要注意的是，并不是所有的传输策略都是802.3ad适应的，尤其考虑到 802.3ad 标准的包乱序问题。不同的实现可能会有不同的适应性。</p></li> <li><p>必要条件1：ethtool 支持获取每个slave的速率和双工设定</p></li> <li><p>必要条件2：switch(交换机) 支持IEEE802.3ad Dynamic link aggregation 条件3：大多数switch(交换机)需要经过特定配置才能支持802.3ad模式</p></li></ul> <p><strong>mode=5 (balance-tlb，适配器传输负载均衡)</strong>：根据每个 slave 的负载情况选择 slave 进行发送，接收时使用当前轮到的slave。该模式要求slave接口的网络设备驱动有某种ethtool支持；而且ARP监控不可用。</p> <ul><li><p>特点：不需要任何特别的 switch(交换机) 支持的 bonding。在每个slave上根据当前的负载（根据速度计算）分配外出流量。如果正在接受数据的slave出故障了，另一个slave接管失败的slave的MAC地址。</p></li> <li><p>必要条件：ethtool 支持获取每个 slave 的速率</p></li></ul> <p><strong>mode=6 (balance-alb，适配器适应性负载均衡)</strong>：在 mode5 的 tlb 基础上增加了 rlb (接收负载均衡，receiveload balance).不需要任何switch(交换机) 的支持。接收负载均衡是通过 ARP 协商实现的.</p> <ul><li>特点：该模式包含了 balance-tlb 模式，同时加上针对 IPV4 流量的接收负载均衡(receiveload balance, rlb)，而且不需要任何交换机的支持。接收负载均衡是通过 ARP 协商实现的。bonding 驱动截获本机发送的 ARP 应答，并把源硬件地址改写为 bond 中某个 slave 的唯一硬件地址，从而使得<strong>不同的对端使用不同的硬件地址进行通信</strong>，来自服务器端的接收流量也会被均衡。当本机发送 ARP 请求时，bonding 驱动把对端的 IP 信息从 ARP 包中复制并保存下来。当 ARP 应答从对端到达时，bonding 驱动把它的硬件地址提取出来，并发起一个 ARP 应答给 bond 中的某个 slave。使用 ARP 协商进行负载均衡的一个问题是：每次广播 ARP请求时都会使用 bond 的硬件地址，因此对端学习到这个硬件地址后，接收流量将会全部流向当前的 slave。这个问题可以通过给所有的对端发送更新（ARP应答）来解决，应答中包含他们独一无二的硬件地址，从而导致流量重新分布。当新的 slave 加入到 bond中时，或者某个未激活的 slave 重新激活时，接收流量也要重新分布。接收的负载被顺序地分布（round robin）在 bond 中最高速的 slave 上当某个链路被重新接上，或者一个新的 slave 加入到 bond 中，接收流量在所有当前激活的 slave 中全部重新分配，通过使用指定的 MAC 地址给每个 client 发起 ARP 应答。下面介绍的 updelay 参数必须被设置为某个大于等于 switch(交换机) 转发延时的值，从而保证发往对端的ARP 应答不会被 switch(交换机) 阻截。</li></ul> <table><thead><tr><th style="text-align:center;">Mode</th> <th style="text-align:center;">Policy</th> <th style="text-align:center;">How it works</th> <th style="text-align:center;">Fault Tolerance</th> <th style="text-align:center;">Load balancing</th></tr></thead> <tbody><tr><td style="text-align:center;">0</td> <td style="text-align:center;">Round Robin</td> <td style="text-align:center;">packets are sequentially transmitted/received through each interfaces one by one.</td> <td style="text-align:center;">No</td> <td style="text-align:center;">Yes</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">Active Backup</td> <td style="text-align:center;">one NIC active while another NIC is asleep. If the active NIC goes down, another NIC becomes active. only supported in</td> <td style="text-align:center;">x86 environments.</td> <td style="text-align:center;">Yes</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">XOR [exclusive OR]</td> <td style="text-align:center;">In this mode the, the MAC address of the slave NIC is matched up against the incoming request’s MAC and once this</td> <td style="text-align:center;">connection is established same NIC is used to transmit/receive for the destination MAC.</td> <td style="text-align:center;">Yes</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">Broadcast</td> <td style="text-align:center;">All transmissions are sent on all slaves</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">No</td></tr> <tr><td style="text-align:center;">4</td> <td style="text-align:center;">Dynamic Link Aggregation</td> <td style="text-align:center;">aggregated NICs act as one NIC which results in a higher throughput, but also provides failover in the case</td> <td style="text-align:center;">that a NIC fails. Dynamic Link Aggregation requires a switch that supports IEEE 802.3ad.</td> <td style="text-align:center;">Yes</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:center;">Transmit Load Balancing (TLB)</td> <td style="text-align:center;">The outgoing traffic is distributed depending on the current load on each slave interface. Incoming</td> <td style="text-align:center;">traffic is received by the current slave. If the receiving slave fails, another slave takes over the MAC address of the failed</td> <td style="text-align:center;">slave.</td></tr> <tr><td style="text-align:center;">6</td> <td style="text-align:center;">Adaptive Load Balancing (ALB)</td> <td style="text-align:center;">Unlike Dynamic Link Aggregation, Adaptive Load Balancing does not require any particular switch configuration. Adaptive Load Balancing is only supported in x86 environments. The receiving packets are load balanced through ARP negotiation.</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td></tr></tbody></table> <hr> <h2 id="_2-配置-bond"><a href="#_2-配置-bond" class="header-anchor">#</a> 2. 配置 bond</h2> <p>假设对两个网卡 eth0、eth1 做 bond</p> <h3 id="_2-1-centos-6-配置方式"><a href="#_2-1-centos-6-配置方式" class="header-anchor">#</a> 2.1 CentOs 6 配置方式</h3> <ol><li><p>创建 <code>/etc/sysconfig/network-scripts/ifcfg-bond0</code> 文件，内容如下：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">DEVICE</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>
<span class="token attr-name">TYPE</span><span class="token punctuation">=</span><span class="token attr-value">Bond</span>
<span class="token attr-name">NAME</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>
<span class="token attr-name">BOOTPROTO</span><span class="token punctuation">=</span><span class="token attr-value">static</span>
<span class="token attr-name">USERCTL</span><span class="token punctuation">=</span><span class="token attr-value">no</span>
<span class="token attr-name">ONBOOT</span><span class="token punctuation">=</span><span class="token attr-value">yes</span>
<span class="token attr-name">IPADDR</span><span class="token punctuation">=</span><span class="token attr-value">192.168.2.1</span>
<span class="token attr-name">NETMASK</span><span class="token punctuation">=</span><span class="token attr-value">255.255.255.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>分别编辑 <code>/etc/sysconfig/network-scripts/ifcfg-eth0</code> 以及 <code>/etc/sysconfig/network-scripts/ifcfg-eth1</code> 两张网卡：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># eth0</span>
<span class="token attr-name">DEVICE</span><span class="token punctuation">=</span><span class="token attr-value">eth0</span>
<span class="token attr-name">TYPE</span><span class="token punctuation">=</span><span class="token attr-value">Ethernet</span>
<span class="token attr-name">ONBOOT</span><span class="token punctuation">=</span><span class="token attr-value">yes</span>
<span class="token attr-name">MASTER</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>

<span class="token comment"># eth1</span>
<span class="token attr-name">DEVICE</span><span class="token punctuation">=</span><span class="token attr-value">eth1</span>
<span class="token attr-name">TYPE</span><span class="token punctuation">=</span><span class="token attr-value">Ethernet</span>
<span class="token attr-name">ONBOOT</span><span class="token punctuation">=</span><span class="token attr-value">yes</span>
<span class="token attr-name">MASTER</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>编辑 <code>/etc/modprobe.d/bonding.conf</code> 文件并指定 mode：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">alias</span> <span class="token attr-value">bond0 bonding</span>
<span class="token attr-name">options</span> <span class="token attr-value">bond0 miimon=100 mode=5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>重启网络服务，并查看 bond 状态。</p></li></ol> <h3 id="_2-2-centos-7-配置方式"><a href="#_2-2-centos-7-配置方式" class="header-anchor">#</a> 2.2 CentOs 7 配置方式</h3> <p>CentOs 7 的配置方式大体与 CentOs 6 一致，只不过不需要编辑 <code>/etc/modprobe.d/bonding.conf</code> 文件指定 mode，而是在 <code>/etc/sysconfig/network-scripts/ifcfg-bond0</code> 中一并指定：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">DEVICE</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>
<span class="token attr-name">TYPE</span><span class="token punctuation">=</span><span class="token attr-value">Bond</span>
<span class="token attr-name">NAME</span><span class="token punctuation">=</span><span class="token attr-value">bond0</span>
<span class="token attr-name">BOOTPROTO</span><span class="token punctuation">=</span><span class="token attr-value">static</span>
<span class="token attr-name">USERCTL</span><span class="token punctuation">=</span><span class="token attr-value">no</span>
<span class="token attr-name">ONBOOT</span><span class="token punctuation">=</span><span class="token attr-value">yes</span>
<span class="token attr-name">IPADDR</span><span class="token punctuation">=</span><span class="token attr-value">192.168.2.1</span>
<span class="token attr-name">NETMASK</span><span class="token punctuation">=</span><span class="token attr-value">255.255.255.0</span>
<span class="token attr-name">BONDING_OPTS</span><span class="token punctuation">=</span><span class="token attr-value">&quot;mode=5 miimon=100&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_3-开启路由转发"><a href="#_3-开启路由转发" class="header-anchor">#</a> 3. 开启路由转发</h2> <ol><li><p>首先开启路由转发功能，编辑 <code>/etc/sysctl.conf</code>，添加以下配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>net.ipv4.ip_forward=1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>执行 <code>sysctl -w net.ipv4.ip_forward=1</code> 临时开启。</p></li> <li><p>根据网络接口建立规则文件，比如对 bond0 添加路由转发规则，则编辑文件 <code>/etc/sysconfig/network-scripts/route-bond0</code>，并添加路由规则：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">192.168.2.0/24</span> <span class="token attr-value">via 192.168.2.0 dev bond0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>重启网络服务或者临时添加路由规则 <code>ip route add 192.168.2.0/24 via 192.168.2.0 dev bond0</code>。</p></li></ol> <h2 id="_4-查看物理网卡"><a href="#_4-查看物理网卡" class="header-anchor">#</a> 4. 查看物理网卡</h2> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 从总线查看物理网卡</span>
<span class="token attr-name">lspci</span> <span class="token attr-value">| grep -i eth</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_5-异常处理"><a href="#_5-异常处理" class="header-anchor">#</a> 5. 异常处理</h2> <h3 id="_5-1-device-eth0-does-not-seem-to-be-present-delaying-initialization"><a href="#_5-1-device-eth0-does-not-seem-to-be-present-delaying-initialization" class="header-anchor">#</a> 5.1. device eth0 does not seem to be present, delaying initialization</h3> <p>出现这个问题的原因往往都是网卡 mac 的原因，通常是因为网卡与之前的 mac 地址对应不上，主要看以下两个地方：</p> <ol><li><code>/etc/sysconfig/network-scripts/ifcfg-eth0</code> 里删除 mac 地址配置，尝试重启。</li> <li><code>/etc/udev/rules.d/70-persistent-net.rule</code> 删除该文件后重启机器，该文件绑定了网卡及其 mac。</li></ol> <h3 id="_5-2-配置网卡-ringbuffer-为最大"><a href="#_5-2-配置网卡-ringbuffer-为最大" class="header-anchor">#</a> 5.2 配置网卡 ringbuffer 为最大</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token comment">#查找网卡名称</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">eth</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /proc/net/dev <span class="token operator">|</span><span class="token function">sed</span> -n <span class="token string">'4,20p'</span><span class="token operator">|</span><span class="token function">awk</span> -F <span class="token string">':'</span> <span class="token string">'{print <span class="token variable">$1</span>}'</span><span class="token variable">`</span></span> 
<span class="token keyword">do</span>
<span class="token comment">#查找在用网卡</span>
<span class="token assign-left variable">p</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ethtool</span> $eth <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'/Link detected:/'</span> <span class="token operator">|</span><span class="token function">sed</span> <span class="token string">'s/Link detected: //'</span><span class="token variable">`</span></span> 
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token string">&quot;bond&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$p</span> <span class="token operator">=</span> <span class="token function">yes</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$eth</span> <span class="token operator">!=</span> <span class="token variable">$b</span>* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
<span class="token comment">#查找网卡可配最大值</span>
<span class="token assign-left variable">maxn</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ethtool</span> -g $eth <span class="token operator">|</span><span class="token function">grep</span> -w <span class="token string">'RX:'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'BEGIN {max = 0} {if (<span class="token variable">$1</span>+0 &gt; max+0)  max=<span class="token variable">$1</span>} END {print  max}'</span><span class="token variable">`</span></span>
<span class="token function">ethtool</span> -G <span class="token variable">$eth</span> tx <span class="token variable">$maxn</span>
<span class="token function">ethtool</span> -G <span class="token variable">$eth</span> rx <span class="token variable">$maxn</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/13/2021, 1:28:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/books/linux/yuan-li-pian/07.xfs-vs-ext4-wen-jian-xi-tong.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        xfs VS ext4 文件系统
      </a></span> <span class="next"><a href="/books/linux/yuan-li-pian/09.-guan-yu-mkfs.ex4-de-inode.html">
        关于 mkfs.ex4 的 inode
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/books/assets/js/app.a32f3f13.js" defer></script><script src="/books/assets/js/2.f434c5a6.js" defer></script><script src="/books/assets/js/12.6dae06d9.js" defer></script>
  </body>
</html>