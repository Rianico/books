(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{757:function(a,s,t){"use strict";t.r(s);var r=t(70),e=Object(r.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"kafka-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-常用命令"}},[a._v("#")]),a._v(" Kafka 常用命令")]),a._v(" "),t("h3",{attrs:{id:"under-replicated-partitions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#under-replicated-partitions"}},[a._v("#")]),a._v(" Under-replicated partitions "),t("a",{attrs:{id:"under-replicated-partitions"}})]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--zookeeper zk01,zk02,zk03:2181"')]),a._v("\n/opt/kafka/bin/kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ZK")]),a._v(" --describe --under-replicated-partitions\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"unavailable-partitions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unavailable-partitions"}},[a._v("#")]),a._v(" Unavailable partitions "),t("a",{attrs:{id:"unavailable-partitions"}})]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ZK")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--zookeeper zk01,zk02,zk03:2181"')]),a._v("\n/opt/kafka/bin/kafka-topics.sh "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ZK")]),a._v(" --describe --unavailable-partitions\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"get-offset-in-kafka-kerberos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get-offset-in-kafka-kerberos"}},[a._v("#")]),a._v(" Get Offset in Kafka (Kerberos)")]),a._v(" "),t("div",{staticClass:"language-vim line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vim"}},[t("code",[a._v("export COMMAND_CONFIG"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--command-config /path/to/group.properties"')]),a._v("\nkafka"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("groups"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("sh")]),a._v(" $COMMAND_CONFIG "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("bootstrap"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server kafka01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("describe "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("group TEST_TOPIC_GROUP\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("group.properties：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("security.protocol"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SASL_PLAINTEXT\nsasl.kerberos.service.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kafka\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"reset-offset-in-kafka-kerberos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reset-offset-in-kafka-kerberos"}},[a._v("#")]),a._v(" Reset Offset in Kafka (Kerberos)")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("COMMAND_CONFIG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--command-config /path/to/group.properties"')]),a._v("\nkafka-consumer-groups "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$COMMAND_CONFIG")]),a._v(" --bootstrap-server kafka01:9092 --reset-offsets --to-latest --execute --topic CY_PLAYLOAD_JY_XDR --group TEST_TOPIC_GROUP\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"kafka-prefix-acl-kafka-2-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-prefix-acl-kafka-2-0"}},[a._v("#")]),a._v(" Kafka Prefix Acl (Kafka > 2.0)")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kafka-acls.sh  --authorizer kafka.security.auth.SimpleAclAuthorizer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n               --authorizer-properties zookeeper.connect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("zk01:2181 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n               --add --allow-principal User:"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'zxk'")]),a._v(" --operation READ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n               --topic TEST_TOPIC --group"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'spark-kafka-source-'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n               --resource-pattern-type prefixed\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h3",{attrs:{id:"producer-and-consumer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#producer-and-consumer"}},[a._v("#")]),a._v(" Producer And Consumer")]),a._v(" "),t("div",{staticClass:"language-vim line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vim"}},[t("code",[a._v("# 生产者产生资源\nkafka"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("producer"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("sh")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("broker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("list")]),a._v(" kafka01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("topic TEST_TOPIC\n\n# 消费者消费资源\nkafka"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("sh")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("bootstrap"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server kafka01"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("from"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("beginning "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("topic TEST_TOPIC\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);