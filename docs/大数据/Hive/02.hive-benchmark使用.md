---
title: hive-benchmark 使用
date: 2021-02-24
---

# hive-benchmark 使用

## 1. 简介

hive-testbench 属于 HDP 出品，是一个用于 Hive 测试的数据生成工具，可以简单地测试 Hive 在大数据集下的性能表现。

项目地址：https://github.com/hortonworks/hive-testbench。

要求集群安装 Hadoop 2.2 以上 和 Hive。

## 2. 使用方式

首先拉取并编译项目：

```bash
# 拉取项目
cd /opt/install/
git clone https://github.com/hortonworks/hive-testbench.git

# 切换为 hdp3 分支
git checkout hdp3

# 编译项目
cd /opt/install/hive-testbench
./tpcds-build.sh
```

修改目录文件所有者为 hdfs：`chown -R hdfs:hadoop /opt/install/hive-testbench`

生成数据的语法格式为：`tpcds-setup.sh scale_factor [directory]`。其中 `scale_factor` 的单位为 GB，`[directory]` 为 hdfs 上的路径，不指定则默认路径为 `/tmp/tpcds-generate/{scale_factor}`。

使用 hdfs 用户生成 50 GB 测试数据：`sudo -u hdfs ./tpcds-setup.sh 50`，同时还会生成各种库表，数据库为 `tpcds_bin_partitioned_orc_50`、`tpcds_text_500`。

