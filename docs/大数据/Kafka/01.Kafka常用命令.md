---
title: Kafka 常用命令
date: 2020-07-22 10:57:03
permalink: /pages/2e9aa9/
---
# Kafka 常用命令

## Under-replicated partitions

```bash
export ZK="--zookeeper zk01,zk02,zk03:2181"
/opt/kafka/bin/kafka-topics.sh $ZK --describe --under-replicated-partitions
```

## Unavailable partitions

```bash
export ZK="--zookeeper zk01,zk02,zk03:2181"
/opt/kafka/bin/kafka-topics.sh $ZK --describe --unavailable-partitions
```

## Get Offset in Kafka \(Kerberos\)

```vim
export COMMAND_CONFIG="--command-config /path/to/group.properties"
kafka-consumer-groups.sh $COMMAND_CONFIG --bootstrap-server kafka01:9092 --describe --group TEST_TOPIC_GROUP
```

group.properties：

```bash
security.protocol=SASL_PLAINTEXT
sasl.kerberos.service.name=kafka
```

## Reset Offset in Kafka \(Kerberos\)

```bash
export COMMAND_CONFIG="--command-config /path/to/group.properties"
kafka-consumer-groups $COMMAND_CONFIG --bootstrap-server kafka01:9092 --reset-offsets --to-latest --execute --topic CY_PLAYLOAD_JY_XDR --group TEST_TOPIC_GROUP
```

## Kafka Prefix Acl \(Kafka &gt; 2.0\)

```bash
kafka-acls.sh  --authorizer kafka.security.auth.SimpleAclAuthorizer \
               --authorizer-properties zookeeper.connect=zk01:2181 \
               --add --allow-principal User:'zxk' --operation READ \
               --topic TEST_TOPIC --group='spark-kafka-source-' \
               --resource-pattern-type prefixed
```

## Producer And Consumer

```vim
# 生产者产生资源
kafka-console-producer.sh --broker-list kafka01:9092 --topic TEST_TOPIC

# 消费者消费资源
kafka-console-consumer.sh --bootstrap-server kafka01:9092 --from-beginning --topic TEST_TOPIC
```

