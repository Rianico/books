---
title: 04. Java 8 时间工具
date: 2020-07-22 10:57:05
---
# Java 8 时间工具

Java 8 中新增了 `java.time` 包，目的是为了代替 `java.util.Date` ，主要有以下优点：

* 解决了线程安全问题，每个对象都是不可变的，有点类似 copy on write 思想。
* 使用 “域驱动设计” 使得每个类都只专注负责一块内容，从而提供易用的 API 。

```java
  def main(args: Array[String]): Unit = {

    // current timestamp
    val cur = Instant.now().atZone(ZoneId.of("Asia/Shanghai"))
    println(s"current timestamp(Asia/Shanghai): ${cur.toInstant.toEpochMilli}")
    // current timestamp(Asia/Shanghai): 1584850723359

    // define a time formatter
    val formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")

    // convert from timestamp to a specified format string
    val _cur = cur.toInstant.toEpochMilli
    val curLocalTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(_cur), ZoneId.of("GMT+0800"))
    println(s"convert from timestamp to date: ${formatter.format(curLocalTime)}")
    // convert from timestamp to date: 2020-03-22 12:18:43

    // input as GMT format
    val time = "2020-01-01 00:00:00"
    val zero = LocalDateTime.parse(time, formatter).atZone(ZoneId.of("GMT+0800"))
    println(s"zero day of 2020: $zero")
    // zero day of 2020: 2020-01-01T00:00+08:00[GMT+08:00]

    // get current yyyy
    println(s"year: ${Year.now()}")
    // year: 2020

    // get current yyyy-MM
    println(s"year-month: ${YearMonth.now()}")
    // year-month: 2020-03

    // one day later
    println("one day later: " + LocalDate.now().plusDays(1))
    println("one day later: " +LocalDate.now().plus(1, ChronoUnit.DAYS))
    // one day later: 2020-03-23

  }
```

