---
title:  CentOs6 关闭 swappiness
date: 2020-07-23 09:53:36
---
# CentOS 6 修改swappiness

swap分区是在系统内存不足时，转而利用磁盘空间作为内存使用的一种机制。

`swappiness`的值决定了Linux在使用了多少内存之后就会开始使用磁盘的swap分区，默认值通常为60，也就是说，Linux在剩下 $$100\% - 60\% = 40\%$$ 内存的时候，系统便会开始使用swap分区。

由于swap分区位于磁盘上，速度肯定是不如内存的，因此通常会把这个值调小到1~10之间，本人习惯调整为1。

```bash
# 查看swappiness
sysctl -q vm.swappiness

# 临时修改swappiness
sysctl vm.swappiness=1

# 关闭swap并重新打开，将swap的数据清空
swapoff -a && swapon -a

# 永久修改swappiness
echo 'vm.swappiness = 1' >> /etc/sysctl.conf && sysctl -p
```

不建议彻底关闭swap分区，否则在系统真的没有内存可用的时候，会导致系统崩溃。

