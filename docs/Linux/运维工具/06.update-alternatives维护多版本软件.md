---
title: update-alternatives 维护多版本软件
date: 2021-03-15
---



update-alternatives 是 Linux 系统专门用于维护系统命令链接的一个工具，许多系统软件（/usr/bin目录下）都会指向 /etc/alternatives 的某个软链接，而 update-alternatives 则通过管理这些软链接来实现软件之间的版本切换。

查看 update-alternatives 用法如下：

```bash
[root@localhost jvm]# alternatives -h
alternatives version 1.7.4 - Copyright (C) 2001 Red Hat, Inc.
This may be freely redistributed under the terms of the GNU Public License.

usage: alternatives --install <link> <name> <path> <priority>
                    [--initscript <service>]
                    [--family <family>]
                    [--slave <link> <name> <path>]*
       alternatives --remove <name> <path>
       alternatives --auto <name>
       alternatives --config <name>
       alternatives --display <name>
       alternatives --set <name> <path>
       alternatives --list

common options: --verbose --test --help --usage --version --keep-missing
                --altdir <directory> --admindir <directory>
```

**--install**，增加一组新的系统命令链接，alternative 可以按照 name 来分组，然后一个分组下可以有多个链接，每个链接都指向目标路径，例如添加一个新的 java 链接：

```bash
update-alternatives --install /usr/bin/java java /usr/lib/jvm/bisheng-jdk1.8.0_272 3
```

**--remove**，删除一个 name 对应的 alternative，如果删除的是当前使用中的 alternative，那么会自动选择一个最高优先级的链接来使用：

```bash
update-alternatives --remove java /usr/lib/jvm/bisheng-jdk1.8.0_272
```

**--config**，真正设置软连接的指向路径：

```bash
 update-alternatives --config java
 
 
There are 2 programs which provide 'java'.

  Selection    Command
-----------------------------------------------
   1           java-1.8.0-openjdk.aarch64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-7.b13.el7.aarch64-debug/jre/bin/java)
*+ 2           java-1.8.0-openjdk.aarch64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-7.b13.el7.aarch64/jre/bin/java)
```

**--display**，显示某个链接名称的相关信息：

```bash
update-alternatives --display java
```

