(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{869:function(a,s,e){"use strict";e.r(s);var n=e(70),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"yarn-lables实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn-lables实践"}},[a._v("#")]),a._v(" Yarn Lables实践")]),a._v(" "),e("p",[a._v("组件：")]),a._v(" "),e("ul",[e("li",[a._v("Ambari 2.7.3")]),a._v(" "),e("li",[a._v("HDP 3.1.0")]),a._v(" "),e("li",[a._v("鲲鹏服务器（arm）：agent1")]),a._v(" "),e("li",[a._v("戴尔服务器（x86）：agent2")])]),a._v(" "),e("p",[a._v("Node label 从 Hadoop 2.6  版本开始引入，到了 Hadoop 2.8 开始才较为成熟，可以根据节点的一些角色定位、处理能力（结合具体业务场景）等按需对节点划分为几个不同的区域（分组），并可以让作业在指定分区下的节点上运行。")]),a._v(" "),e("p",[a._v("当前 Node Label 需要结合容量调度方式进行工作，暂不支持其他调度方式。")]),a._v(" "),e("p",[a._v("Node Label 通常结合节点、用户队列使用，三者结构如下：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210311091541.png",alt:"image-20210311091541797"}})]),a._v(" "),e("h2",{attrs:{id:"_1-开启-yarn-lables-相关功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-开启-yarn-lables-相关功能"}},[a._v("#")]),a._v(" 1. 开启 Yarn Lables 相关功能")]),a._v(" "),e("p",[a._v("首先开启 Yarn 服务下的 Node Labels 功能（等同于修改 "),e("code",[a._v("yarn-site.xml")]),a._v(" 的 "),e("code",[a._v("yarn.node-labels.enabled")]),a._v(" 为 true）：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210223155451.png",alt:"image-20210223155451550"}})]),a._v(" "),e("p",[a._v("在 HDFS 上创建一个存储 Node Lables 信息的路径：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" hdfs\nhadoop fs -mkdir -p /yarn/node-labels\nhadoop fs -chown -R yarn:yarn /yarn\nhadoop fs -chmod -R "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("700")]),a._v(" /yarn\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("创建 yarn 用户目录：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("hadoop fs -mkdir -p /user/yarn\nhadoop fs -chown -R yarn:yarn /user/yarn\nhadoop fs -chmod -R "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("700")]),a._v(" /user/yarn\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("修改 Yarn 服务的 "),e("em",[a._v("YARN Node Labels FS Store Root directory")]),a._v(" 存储路径为前面 HDFS 创建好的路径（相当于修改 "),e("code",[a._v("yarn-site")]),a._v(" 的 "),e("code",[a._v("yarn.node-labels.fs-store.root-dir")]),a._v(" 属性）：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210223161005.png",alt:"image-20210223161005283"}})]),a._v(" "),e("p",[a._v("重启 Yarn 服务。")]),a._v(" "),e("h2",{attrs:{id:"_2-添加-node-labels"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加-node-labels"}},[a._v("#")]),a._v(" 2. 添加 Node Labels")]),a._v(" "),e("p",[a._v('Node Lables 会根据我们指定的 label，将集群的节点划分为一个个 partition，一个节点只可以有一个 lable。如果不分配 lable，则节点默认属于 Default partition（即 partition=""）。')]),a._v(" "),e("p",[a._v("这里我们添加 kunpeng 以及 dell 两种 label：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" -u "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" rmadmin -addToClusterNodeLabels "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kunpeng(exclusive=true),dell(exclusive=true)"')]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("exclusive 表示 partition 是否独占，默认为 true。两种配置的含义分别如下：")]),a._v(" "),e("ul",[e("li",[e("p",[e("strong",[a._v("true")]),a._v("： containers 只会分配到完全匹配的节点上。例如，一个 partition 只能被 partition 指定为 x 的任务访问。如果任务不指定 label，则会分配到 Default partition 的节点上。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://docs.cloudera.com/HDPDocuments/HDP2/HDP-2.3.6/bk_yarn_resource_mgt/content/figures/2/figures/exclusive_node_labels.png",alt:"img"}})])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("false")]),a._v("：如果一个 partition 是非独占的，那么当有空闲资源时，也可以共享给 Default partition 下的任务。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://docs.cloudera.com/HDPDocuments/HDP2/HDP-2.3.6/bk_yarn_resource_mgt/content/figures/2/figures/non-exclusive_node_labels.png",alt:"img"}})])])]),a._v(" "),e("p",[a._v("关于独占与非独占的区别，更具体的信息可以参考 HDP 的文档："),e("a",{attrs:{href:"https://docs.cloudera.com/HDPDocuments/HDP2/HDP-2.3.6/bk_yarn_resource_mgt/content/ch_node_labels.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Chapter 5. Node Labels"),e("OutboundLink")],1),a._v("。")]),a._v(" "),e("p",[a._v("绝大部分场景下，最好设置为独占，让分布式作业只跑在一种架构下，避免低配的机器与高配机器产生 “木桶原理” 的现象。")]),a._v(" "),e("p",[a._v("如果需要删除 label，则需要确保 label 没有分配到队列才能删除：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" -u "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" rmadmin -removeFromClusterNodeLabels "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<label>[,<label>,...]"')]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("如果需要查看创建的 label，执行下列命令：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" -u "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" cluster --list-node-labels\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"_3-节点分配-label"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-节点分配-label"}},[a._v("#")]),a._v(" 3. 节点分配 Label")]),a._v(" "),e("p",[a._v("节点分配 label 的语法如下：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" -u "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" rmadmin -replaceLabelsOnNode "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"node1[:port]=label1 node2=label2"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-failOnUnknownNodes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("如果不指定 "),e("code",[a._v("[:prot]")]),a._v(" ，就会分配给该节点上的全部 NM，从这里也可以看出，Node Labels 的作用粒度其实是在 NM 上，而非节点上，一个节点可以有多个 NM。")]),a._v(" "),e("p",[a._v("如果指定了 "),e("code",[a._v("-failOnUnknownNodes")]),a._v("，那么当命令中有未知节点时，命令会失败。")]),a._v(" "),e("p",[a._v("如果想要查看节点分配的 label，需要先获取节点的 ID，例如（下列信息来自 HDP 文档）：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@node-1 /"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# sudo -u yarn yarn node -list")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v("/11/21 "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":14:06 INFO impl.TimelineClientImpl: Timeline "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" address: http://node-1.example.com:8188/ws/v1/timeline/\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v("/11/21 "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(":14:07 INFO client.RMProxy: Connecting to ResourceManager at node-1.example.com/240.0.0.10:8050\nTotal Nodes:3\n Node-Id Node-State Node-Http-Address Number-of-Running-Containers\nnode-3.example.com:45454 RUNNING node-3.example.com:50060 "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nnode-1.example.com:45454 RUNNING node-1.example.com:50060 "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nnode-2.example.com:45454 RUNNING node-2.example.com:50060 "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("然后根据节点 ID 获取节点的具体信息：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@node-1 /"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# yarn node -status node-1.example.com:45454")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v("/11/21 06:32:35 INFO impl.TimelineClientImpl: Timeline "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" address: http://node-1.example.com:8188/ws/v1/timeline/\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v("/11/21 06:32:35 INFO client.RMProxy: Connecting to ResourceManager at node-1.example.com/240.0.0.10:8050\nNode Report "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" \n Node-Id "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" node-1.example.com:45454\n Rack "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" /default-rack\n Node-State "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" RUNNING\n Node-Http-Address "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" node-1.example.com:50060\n Last-Health-Update "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" Fri "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v("/Nov/14 06:32:09:473PST\n Health-Report "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" \n Containers "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n Memory-Used "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" 0MB\n Memory-Capacity "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" 1408MB\n CPU-Used "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" vcores\n CPU-Capacity "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" vcores\n Node-Labels "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" x\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br")])]),e("h2",{attrs:{id:"_3-队列绑定-label"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-队列绑定-label"}},[a._v("#")]),a._v(" 3. 队列绑定 Label")]),a._v(" "),e("p",[a._v("NM 分配 node 有 "),e("strong",[a._v("Centralized")]),a._v(" 、"),e("strong",[a._v("Distributed")]),a._v(" 、"),e("strong",[a._v("Delegated-Centralized")]),a._v(" 这几种方式，Ambari 默认为第一种方式。")]),a._v(" "),e("p",[e("strong",[a._v("Centralized")]),a._v("：节点与 label 的映射可以通过 RM 暴露的 CLI, REST 或者 RPC 进行配置。")]),a._v(" "),e("p",[a._v("在 Ambari 的队列配置界面，配置 root 父队列占用 kunpeng、dell 的全部资源，同时设置任务不指定 label 时默认 label 为 kunpeng ：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210224085711.png",alt:"image-20210224085711491"}})]),a._v(" "),e("p",[a._v("配置 haohan、default 队列各占 kunpeng、dell 一半资源：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210223172131.png",alt:"image-20210223172131110"}})]),a._v(" "),e("p",[a._v("子队列无需配置默认 label，默认会继承父队列的规则。Ambari 会按照 Yarn 的规则，自动生成相应的配置。")]),a._v(" "),e("p",[a._v("最后点击保存并刷新队列：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210223173253.png",alt:"image-20210223173253712"}})]),a._v(" "),e("p",[a._v("这里有一点需要注意，同个 label 在不同队列中也是需要指定百分比的，"),e("strong",[a._v("不同队列相同 label 最终的比例之和需要等于 100%")]),a._v("，此时"),e("strong",[a._v("队列之间的资源比例，仅作用于未指定 label 的节点上")]),a._v("。")]),a._v(" "),e("p",[a._v("配置完毕之后，可以通过以下几种方式指定 label：")]),a._v(" "),e("p",[e("strong",[a._v("API 方式")]),a._v("：")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("ApplicationSubmissionContext.setNodeLabelExpression(..)")]),a._v(" to set node label expression for all containers of the application.")]),a._v(" "),e("li",[e("code",[a._v("ResourceRequest.setNodeLabelExpression(..)")]),a._v(" to set node label expression for individual resource requests. This can overwrite node label expression set in ApplicationSubmissionContext")]),a._v(" "),e("li",[a._v("Specify "),e("code",[a._v("setAMContainerResourceRequest.setNodeLabelExpression")]),a._v(" in "),e("code",[a._v("ApplicationSubmissionContext")]),a._v(" to indicate expected node label for application master container.")])]),a._v(" "),e("p",[e("strong",[a._v("Hadoop 运行 jar 包方式")]),a._v("：")]),a._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[a._v("hadoop jar xxx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dmapreduce")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("job"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("node"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("label"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("expression"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"label1"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dmapreduce")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("job"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("queuename"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"queue1"')]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("strong",[a._v("Spark 可以通在 spark-submit 添加参数来指定 label")]),a._v("：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("--conf spark.yarn.am.nodeLabelExpression"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("label1 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--conf spark.yarn.executor.nodeLabelExpression"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("label1\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h2",{attrs:{id:"_4-测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-测试"}},[a._v("#")]),a._v(" 4. 测试")]),a._v(" "),e("p",[a._v("执行 TPC-DS 项目来生成测试数据，在 hadoop 提交任务处指定 label，可以看到提交的 MR 作业都落在指定了 kunpeng 标签的单个节点上：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/20210224112641.png",alt:"img"}})]),a._v(" "),e("p",[e("strong",[a._v("参考文档")]),a._v("：")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://docs.cloudera.com/HDPDocuments/HDP2/HDP-2.3.6/bk_yarn_resource_mgt/content/ch_node_labels.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Chapter 5. Node Labels"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://hadoop.apache.org/docs/r3.1.0/hadoop-yarn/hadoop-yarn-site/NodeLabel.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("YARN Node Labels"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://docs.cloudera.com/HDPDocuments/HDP3/HDP-3.0.0/data-operating-system/content/configuring_node_labels.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Configure Node Labels"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/jiangxiaoxian/p/9412368.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("YARN label 特性 & 指定队列及label提交任务"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=t.exports}}]);