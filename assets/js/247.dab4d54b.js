(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{970:function(s,t,a){"use strict";a.r(t);var e=a(70),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"sbt-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sbt-使用"}},[s._v("#")]),s._v(" sbt 使用")]),s._v(" "),a("h3",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("p",[s._v("一个标准的 sbt 目录结构如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/zhxuankun/Image/raw/master/ARTS_Tips/image-20210717193557623.png",alt:"image-20210717193557623"}})]),s._v(" "),a("p",[s._v("图中圈起来部分的属于默认的 project，名称为 "),a("code",[s._v("root")]),s._v("，"),a("code",[s._v("0711")]),s._v(" 则属于新建的 subproject，名称可以在 "),a("code",[s._v("build.sbt")]),s._v(" 中指定：")]),s._v(" "),a("div",{staticClass:"language-scala line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lazy")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" sub1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("project in file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sub1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("settings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在 "),a("code",[s._v("build.sbt")]),s._v(" 添加了上述代码后，sbt 会自动生成 "),a("code",[s._v("0711")]),s._v(" 路径，同时 subproject 名称也为 "),a("code",[s._v("0711")]),s._v("；如果不指定 project 的目录，则默认生成与变量名一样的目录名。")]),s._v(" "),a("p",[s._v("如果只想只在 "),a("code",[s._v("sub1")]),s._v(" 模块执行一些命令，则输入 "),a("code",[s._v("sub1 / xxx")]),s._v(" 即可。")]),s._v(" "),a("h2",{attrs:{id:"打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[s._v("#")]),s._v(" 打包")]),s._v(" "),a("p",[s._v("进入 sbt-shell 后，执行 "),a("code",[s._v("package")]),s._v(" 即可生成一个 jar 包。")]),s._v(" "),a("h3",{attrs:{id:"添加插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加插件"}},[s._v("#")]),s._v(" 添加插件")]),s._v(" "),a("p",[a("code",[s._v("project")]),s._v(" 通常用来存放构建时的一些环境信息，如插件、sbt 版本等。")]),s._v(" "),a("p",[s._v("可以在 project 目录下新建一个 "),a("code",[s._v("plugins.sbt")]),s._v(" 文件，添加 "),a("code",[s._v("sbt-assembly")]),s._v(" 插件：")]),s._v(" "),a("div",{staticClass:"language-scala line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[s._v("addSbtPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.eed3si9n"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sbt-assembly"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.15.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("接着便可以在 sbt-shell 中执行 assembly 命令打出一个 fat jar。")]),s._v(" "),a("h3",{attrs:{id:"公共配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#公共配置"}},[s._v("#")]),s._v(" 公共配置")]),s._v(" "),a("p",[s._v("可以在 "),a("code",[s._v("build.sbt")]),s._v(" 中定义一个公共配置，并在各个 subproject 中使用：")]),s._v(" "),a("div",{staticClass:"language-scala line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" commonSettings "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Seq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  scalaVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.13.6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加 cdh 仓库")]),s._v("\n  resolvers "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cloudera Repository"')]),s._v(" at "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://repository.cloudera.com/artifactory/cloudera-repos/"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("lazy")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" sub1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("project in file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sub1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("settings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      commonSettings\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"添加仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加仓库"}},[s._v("#")]),s._v(" 添加仓库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('resolvers += "Sonatype OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots"\nresolvers += "Cloudera Repository" at "https://repository.cloudera.com/artifactory/cloudera-repos/"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);