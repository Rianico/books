(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{874:function(e,a,t){"use strict";t.r(a);var i=t(70),o=Object(i.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"hdfs-常用调优"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hdfs-常用调优"}},[e._v("#")]),e._v(" HDFS 常用调优")]),e._v(" "),t("ol",[t("li",[e._v("适当提高 block size，减少大文件的 block 个数")]),e._v(" "),t("li",[e._v("配置 HDFS 机架感知，一来可以提高容错性，二来可以实现短路读：\n"),t("ul",[t("li",[t("em",[e._v("dfs.client.read.shortcircuit")]),e._v("，true")]),e._v(" "),t("li",[t("em",[e._v("dfs.domain.socket.path")]),e._v("，"),t("code",[e._v("/var/lib/hadoop-hdfs/dn_socket")])]),e._v(" "),t("li",[t("em",[e._v("dfs.client.read.shortcircuit.streams.cache.size")]),e._v("，指定 DFSClient 端缓存最近打开 fd 的数量")]),e._v(" "),t("li",[e._v("同时还需要在本地安装 Hadoop 的 lib 库，详见 "),t("a",{attrs:{href:"https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/NativeLibraries.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Native Libraries Guide"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("配置 edits log 到固态盘上，高版本还可以开启 cache，加快 edits log 拉取速度：\n"),t("ul",[t("li",[t("em",[e._v("dfs.ha.tail-edits.in-progress")]),e._v("，true，默认为 false")])])]),e._v(" "),t("li",[e._v("使用 HAR 打包小文件，减少小文件数量。")]),e._v(" "),t("li",[e._v("开启慢节点感知（Hadoop 2.9.0）：\n"),t("ul",[t("li",[t("em",[e._v("dfs.datanode.peer.stats.enabled")])]),e._v(" "),t("li",[t("em",[e._v("dfs.datanode.fileio.profiling.sampling.percentage")])]),e._v(" "),t("li",[t("em",[e._v("dfs.datanode.outliers.report.interval")])])])]),e._v(" "),t("li",[e._v("避免从较长时间为返回心跳信息的节点进行读写：\n"),t("ul",[t("li",[t("em",[e._v("dfs.namenode.avoid.read.stale.datanode")])]),e._v(" "),t("li",[t("em",[e._v("dfs.namenode.avoid.read.stale.datanode")])])])]),e._v(" "),t("li",[e._v("使用基于 JNI 的实现进行组查找：\n"),t("ul",[t("li",[t("em",[e._v("hadoop.security.group.mapping=org.apache.hadoop.security.JniBasedUnixGroupsMappingWithFallback")])])])])])])}),[],!1,null,null,null);a.default=o.exports}}]);