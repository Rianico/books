(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{917:function(s,a,r){"use strict";r.r(a);var t=r(70),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h2",{attrs:{id:"ambari-修改-gc-配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ambari-修改-gc-配置"}},[s._v("#")]),s._v(" Ambari 修改 GC 配置")]),s._v(" "),r("p",[s._v("在网上搜到的关于修改 Ambari GC 配置都是去到 "),r("code",[s._v("/var/lib/ambari-server/ambari-env.sh")]),s._v(" 下，但这只能追加一些 JVM 配置，如堆内存等，但无法修改 GC 收集器，真正设置了 JVM 配置的地方在一个 python 启动脚本里，路径为："),r("code",[s._v("/usr/sbin/ambari_server_main.py")]),s._v("。")]),s._v(" "),r("p",[s._v("Ambari 默认为 CMS 收集器，找到 "),r("code",[s._v("SERVER_START_CMD")]),s._v("，修改为 G1 收集器：")]),s._v(" "),r("div",{staticClass:"language-python line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[s._v("SERVER_START_CMD "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{0} "')]),s._v(" \\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-server "')]),s._v(" \\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-XX:+UseG1GC -Xms8196m -Xmx8196m "')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" \\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Dsun.zip.disableMemoryMapping=true "')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" \\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{1} {2} "')]),s._v(" \\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-cp {3} "')]),s._v("\\\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.ambari.server.controller.AmbariServer "')]),s._v(" \\\n"),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"> {4} 2>&1 || echo $? > {5}"')]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("p",[s._v("还有其他几个类似名称的，分别对应 debug 模式、Windows 平台，根据需要修改即可。")])])}),[],!1,null,null,null);a.default=n.exports}}]);