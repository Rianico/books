(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{761:function(a,s,t){"use strict";t.r(s);var e=t(70),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"update-alternatives-维护多版本软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-alternatives-维护多版本软件"}},[a._v("#")]),a._v(" update-alternatives 维护多版本软件")]),a._v(" "),t("p",[a._v("update-alternatives 是 Linux 系统专门用于维护系统命令链接的一个工具，许多系统软件（/usr/bin目录下）都会指向 /etc/alternatives 的某个软链接，而 update-alternatives 则通过管理这些软链接来实现软件之间的版本切换。")]),a._v(" "),t("p",[a._v("查看 update-alternatives 用法如下：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost jvm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# alternatives -h")]),a._v("\nalternatives version "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.7")]),a._v(".4 - Copyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2001")]),a._v(" Red Hat, Inc.\nThis may be freely redistributed under the terms of the GNU Public License.\n\nusage: alternatives --install "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("priority"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--initscript "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--family "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("family"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--slave "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("*\n       alternatives --remove "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n       alternatives --auto "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n       alternatives --config "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n       alternatives --display "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n       alternatives --set "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n       alternatives --list\n\ncommon options: --verbose --test --help --usage --version --keep-missing\n                --altdir "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --admindir "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br")])]),t("p",[t("strong",[a._v("--install")]),a._v("，增加一组新的系统命令链接，alternative 可以按照 name 来分组，然后一个分组下可以有多个链接，每个链接都指向目标路径，例如添加一个新的 java 链接：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("update-alternatives --install /usr/bin/java java /usr/lib/jvm/bisheng-jdk1.8.0_272 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("strong",[a._v("--remove")]),a._v("，删除一个 name 对应的 alternative，如果删除的是当前使用中的 alternative，那么会自动选择一个最高优先级的链接来使用：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("update-alternatives --remove java /usr/lib/jvm/bisheng-jdk1.8.0_272\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[t("strong",[a._v("--config")]),a._v("，真正设置软连接的指向路径：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v(" update-alternatives --config java\n \n \nThere are "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" programs "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" provide "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'java'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n\n  Selection    Command\n-----------------------------------------------\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("           java-1.8.0-openjdk.aarch64 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-7.b13.el7.aarch64-debug/jre/bin/java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n*+ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("           java-1.8.0-openjdk.aarch64 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-7.b13.el7.aarch64/jre/bin/java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("p",[t("strong",[a._v("--display")]),a._v("，显示某个链接名称的相关信息：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("update-alternatives --display java\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);